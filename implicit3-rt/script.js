// 3D Implicit Surface Grapher

const NAME = "spirulae.implicit3-rt.";

const builtinFunctions = [
    // ["A6 Heart", "(x^2+9/4*y^2+z^2-1)^3=(x^2+9/80*y^2)*z^3"],
    ["A4 Genus 3", "(x^2-1)^2+(y^2-1)^2+(z^2-1)^2+4(x^2y^2+x^2z^2+y^2z^2)+8xyz-2(x^2+y^2+z^2)"],
    ["A5 Star", "4(x^2+2y^2+z^2-1)^2-z(5x^4-10x^2z^2+z^4)=1"],
    ["A6 Fox", "2(x^2+2y^2+z^2)^3-2(9x^2+y^2)z^3=1"],
    ["A7 Genus 2", "2y(y^2-3x^2)(1-z^2)+(x^2+y^2)^2-(9z^2-1)(1-z^2)"],
    ["A4 Goursat", "2(x^4+y^4+z^4)-3(x^2+y^2+z^2)+2"],
    ["A6 Spiky 1", "(x^2+y^2+z^2-2)^3+2000(x^2y^2+x^2z^2+y^2z^2)=10"],
    ["A6 Spiky 2", "0=z^6-5(x^2+y^2)z^4+5(x^2+y^2)^2z^2+2(5x^4-10x^2y^2+y^4)yz-1.002(x^2+y^2+z^2)^3+0.2"],
    ["A6 Barth", "3(x^2+y^2+z^2-1)^2-4(x^2-y^2)(y^2-z^2)(z^2-x^2)"],
    ["A3 Ding-Dong", "x^2+y^2=(1-z)z^2"],
    ["A3 Bridge", "x^2+y^2z+z^2=0.01"],
    ["A8 Balloons", "(x^2+y^2+z^2)^4=(8xyz)^2"],
    ["Radical Heart", "x^2+4y^2+(1.15z-0.6(2(x^2+.05y^2+.001)^0.7+y^2)^0.3+0.3)^2=1"],
    // ["Ln Wineglass", "x^2+y^2-ln(z+1)^2-0.02"],
    ["Spheres", "(sin(2x)sin(2y)sin(2z)+0.9)e^(x+y)"],
    ["Noisy Sphere", "x^2+y^2+z^2=1+0.1sin(10x)sin(10y)sin(10z)"],
    // ["Noisy Octa", "abs(x)+abs(y)+abs(z)-1+0.7cos(10x)cos(10y)cos(10z)"],
    // ["Noisy Peanut", "1/((x-1)^2+y^2+z^2)+1/((x+1)^2+y^2+z^2)-1.4=0.02(cos(30x)+cos(30y)cos(30z))"],
    ["Bull's Head", "cos(3x)cos(3y)+sin(3y)cos(3z)-asin(sin(3z)cos(3x))+x^2+y^2+z^2-1"],
    // ["Radio Sphere", "f(k)=sin(kx)sin(ky)sin(kz)/k;k=10&#32;#&#32;play&#32;with&#32;this&#32;parameter;s=ln(e^10+e^k);x^2+y^2+z^2-1=f(s(f(k)+f(2k)+f(3k)+f(4k)+f(8k)))"],
    // ["Bracelet", "rho=hypot(x,y)-1;a=atan(y,x);rho1=hypot(rho,z);a1=atan(z,rho);r=0.1(1+0.1asin(0.99sin(2a1-2.5a))^2;f(x,y,z)=hypot(rho,z)-r;4f(0.9x,y,0.5z)"],
    ["Sin Terrace", "z=0.25round(4sin(x)sin(y))"],
    ["Tan Cells", "z=1/((tan(x)tan(y))^2+1)-1/2"],
    ["Arcsin Field", "z=1/2arcsin(cos(2log(x^2+y^2))cos(5atan(y,x)))^2ln(hypot(x,y)+1)"],
    ["Erf Field", "2z=erf(x)-erfc(y)+erfinv(sin(2x)cos(2y))"],
    ["Tan Forest", "z=.2tan(asin(cos(5x)cos(5y)))+.5sin(10z)"],
    ["Sine Field", "z=100sin(x-sqrt(x^2+y^2))^8sin(y+sqrt(x^2+y^2)-z)^8/(x^2+y^2+50)"],
    ["Sine Tower", "4z+6=1/((sin(4x)sin(4y))^2+0.4sqrt(x^2+y^2+0.005z^2))-4sin(8z)"],
    ["Atan2 Drill", "max(cos(atan(y,x)-20e^((z-1)/4)),x^2+y^2+z/2-1)"],
    // ["Atan2 Donut", "(x^2+y^2+z^2+0.9)^2-4(x^2+z^2)=0.1asin(0.9sin(5atan(z,x)+40y))"],
    ["Atan2 Flower", "a=atan2(z,x)+pi/2;(x^2+z^2)^2+16y^2=2(x^2+z^2)(sin(2.5a)^2+0.5sin(10a)^2)"],
    ["Log2 Spheres", "m=max(|x|,|y|,|z|);k=3/2-m;n=ceil(log(2,k))-2;(3*2^n-k)^2+(x^2+y^2+z^2-m^2)=4^n"],
    ["nCr", "#&#32;suffers&#32;from&#32;numerical&#32;inaccuracy;e^z=nCr(round(x),round(y))"],
    ["Complex Sine", "|sin(x+yi)+sin(y+xi)+sin(y+zi)+sin(z+yi)+sin(z+xi)+sin(x+zi)|=1"],
    ["Bouquet", "r=hypot(x,y,z);theta=atan2(y,x);phi=atan2(hypot(x,y),z)^1.5;r(1-0.5cos(phi))=(1-sin(min(5phi,pi/2))sin(2.5theta-20e^-5phi)^2)cos(5phi)"],
    ["Eyes 1", "n=3ln((x^2+z^2)/(|x|+0.01));sqrt(x^2+z^2)sin(n)^2=10y^2+x^2+0.5z^2-0.3z"],
    ["Eyes 2", "a=3(z+x+1);b=3(z-x+1);sin(min(a*sin(b),b*sin(a)))-cos(max(a*cos(b),b*cos(a)))=(3-2z)/9+((2x^2+z^2)/6)^3+100y^2"],
    ["Spiral 1", "k=0.14;r=1/k*ln(hypot(x,y));10((k(xcos(r)+ysin(r))-0.5^2(x^2+y^2))^2+z^2)=x^2+y^2"],
    ["Spiral 2", "k=0.2;r=1/k*ln(hypot(x,y));(k*(xcos(r)+ysin(r)))^2+z^2=0.09tanh(x^2+y^2)-0.02(x^2+y^2)"],
    // ["Spiral 3", "k=0.14;r=hypot(x,y,0.01);r1=1/k*ln(r);10((k(xcos(r1)+ysin(r1))-(0.5r)^2)^2+((z+0.5r-0.5)(r^2+0.1))^2)=r^2"],
    ["Spiral 3", "g(x)=10atan(x);r=hypot(x,y);s=xsin(g(r))-ycos(g(r);t(x,y,z)=8z^2(r^2+0.1)^-0.6+0.015r^2-tanh(s);0.25t(4z+2,4x,4y)"],
    ["Spiral 4", "g(x)=20root(4,x);r=hypot(x,y);s(x,y,z)=((2(z+0.1sin(10r)))^4)+0.1r^2-xsin(g(r))+ycos(g(r));0.25s(-4z,4x,4y)"],
    ["Atan2 Spirula", "k=0.15&#32;#&#32;r=e^kt;#&#32;polar&#32;coordinates;r=2hypot(x,y);a=atan(y,x);#&#32;index&#32;of&#32;spiral&#32;layer;n=min((log(r)/k-a)/(2pi),1);#&#32;distance&#32;to&#32;logarithmic&#32;spiral;d(n)=abs(e^(k*(2pin+a))-r);d1=min(d(floor(n)),d(ceil(n)));sqrt(d1^2+4z^2)=0.4r^0.7(1+0.01sin(40a))"],
    ["Spiky Spirula", "r1=hypot(x,y);r2=r1*(1+0.5e^(-r1^6)(2/pi*asin(0.99sin(10atan(y,x))))^5exp(-(8z)^2/r1));d(x,y,z)=xcos(3ln(r2))+ysin(3ln(r2))-(x^2+y^2+10z^2/r1);-3d(-0.3x,0.3z-0.2,0.3y)"],
    ["Spiral Cliff", "r=hypot(x,y);g=15atan(2r);s=xsin(g)-ycos(g);ze^(10z)=tanh(tanh(r)s)"],
    ["FCC Cell", "s=max(|x|,|y|,|z|);s1=(|x|-1)^2+(|y|-1)^2+(|z|-1)^2-1/2;s2=(s-1)^2+(x^2+y^2+z^2-s^2)-1/2;min(4max(s1,s-1),2max(s2,s-1))"],
    ["Atomic Orbitals", "r=hypot(x,y,z);x1=x/r;y1=y/r;z1=z/r;d(r0)=r0^2-r^2;r00(x,y,z)=d(0.28);r10(x,y,z)=d(-0.49y1);r11(x,y,z)=d(0.49z1);r12(x,y,z)=d(-0.49x1);r20(x,y,z)=d(1.09x1y1);r21(x,y,z)=d(-1.09y1z1);r22(x,y,z)=d(0.32(3z1^2-1));r23(x,y,z)=d(-1.09x1z1);r24(x,y,z)=d(0.55(x1^2-y1^2));-max(r00(x,y,z-1.5),r10(x+1,y,z-0.4),r11(x,y,z-0.4),r12(x-1,y,z-0.4),r20(x+2,y,z+1),r21(x+1,y,z+1),r22(x,y,z+1),r23(x-1,y,z+1),r24(x-2,y,z+1))"],
    ["Terrain", "h(x,y)=fract(126sin(12x+33y+98))-0.5;s(x)=3x^2-2x^3;v00=h(floor(x),floor(y));v01=h(floor(x),floor(y)+1);v10=h(floor(x)+1,floor(y));v11=h(floor(x)+1,floor(y)+1);f(x,y)=mix(mix(v00,v01,s(fract(y))),mix(v10,v11,s(fract(y))),s(fract(x)));v(x,y)=f(x,y)+f(2x,2y)/2+f(4x,4y)/4+f(8x,8y)/8+f(16x,16y)/16;z=ln(1+exp(40(v(x,y)-(0.05(x^2+y^2))^2)))/40"],
    ["Fractal Roots", "f0(p)=vec2(p.x^2-p.y^2+z,2p.xp.y);f(p)=f0(p)+vec2(x,y);c=f0(f(f(vec2(x,y))));log(dot(c,c))=0"],
    ["Spiky Fractal", "f0(p)=vec3(p.yp.z,p.xp.z,p.xp.y);f(p)=f0(p)+vec3(x,y,z);c=f0(f(f(f(vec3(x,y,z)))));log(dot(c,c))=log(0.01)"],
    ["Mandelbrot", "u(x,y)=x^2-y^2;v(x,y)=2xy;u1(x,y)=u(u(x,y)+x,v(x,y)+y);v1(x,y)=v(u(x,y)+x,v(x,y)+y);u2(x,y)=u(u1(x,y)+x,v1(x,y)+y);v2(x,y)=v(u1(x,y)+x,v1(x,y)+y);u3(x,y)=u(u2(x,y)+x,v2(x,y)+y);v3(x,y)=v(u2(x,y)+x,v2(x,y)+y);u4(x,y)=u(u3(x,y)+x,v3(x,y)+y);v4(x,y)=v(u3(x,y)+x,v3(x,y)+y;u5(x,y)=u(u4(x,y)+x,v4(x,y)+y);v5(x,y)=v(u4(x,y)+x,v4(x,y)+y);u6(x,y)=u(u5(x,y)+x,v5(x,y)+y);v6(x,y)=v(u5(x,y)+x,v5(x,y)+y);log(u6(x-1/2,hypot(y,z))^2+v6(x-1/2,hypot(y,z))^2)=0"],
    ["Burning Ship", "c=-vec2(x,y)-vec2(1/4,1/2);f(z)=vec2(z.x^2-z.y^2,2|z.xz.y|)+c;g=f(f(f(f(f(f(c;z=0.8|g|^-0.4-1"],
    ["MandelTorus", "k=6;m=6;n=6;R=1.5;r=hypot(hypot(x,y)-R,z);a=atan(y,x);b=atan(hypot(x,y)-R,z);u(x,y,z)=cos(ma)(R+r^ksin(nb));v(x,y,z)=sin(ma)(R+r^ksin(nb));w(x,y,z)=r^kcos(nb);u1(x,y,z)=u(u(x,y,z)+x,v(x,y,z)+y,w(x,y,z)+z);v1(x,y,z)=v(u(x,y,z)+x,v(x,y,z)+y,w(x,y,z)+z);w1(x,y,z)=w(u(x,y,z)+x,v(x,y,z)+y,w(x,y,z)+z);u2(x,y,z)=u(u1(x,y,z)+x,v1(x,y,z)+y,w1(x,y,z)+z);v2(x,y,z)=v(u1(x,y,z)+x,v1(x,y,z)+y,w1(x,y,z)+z);w2(x,y,z)=w(u1(x,y,z)+x,v1(x,y,z)+y,w1(x,y,z)+z);T(x,y,z)=log(hypot(u2(x,y,z),v2(x,y,z),w2(x,y,z)));T(0.6x(R+1),0.6z(R+1),0.6y(R+1))=R*(e^-k+k-1)/(1+e^-k)"],
    // ["Slicing Fruit", "#&#32;spherical&#32;coordinates;r=sqrt(x^2+y^2+z^2);theta=atan2(y,x);phi=atan2(hypot(x,y),z);#&#32;function;t1=0.1sin(2theta)sin(3phi)+0.3sin(12theta)sin(12phi-0.5sin(3theta));r1=0.2+0.8sin(phi)^0.5+rsin(phi)t1;f(x,y,z)=e^(-0.1z)(x^2+y^2+0.5z^2+0.7z);s1=cos(4(x+y+2z+0.3sin(2x-y)))-0.3;max(f(x,y,z)-r1,0.6r1-f(x,y,z),s1)=0"],
    ["Pumpkin", "#&#32;polar&#32;coordinates;r=hypot(x,y);a=atan2(y,x);#&#32;body&#32;of&#32;the&#32;pumpkin;r1=r/(1+0.05sqrt(r)e^(0.7sin(8a));b=hypot(r1,z)-1+0.4/(5r^2+1)+0.1sin(2z)+0.005r1(sin(12a)+0.5sin(37a));#&#32;tip&#32;of&#32;the&#32;pumpkin;t(x,y,z)=max(r-0.07exp(0.5sin(z)),-z,z+0.1cos(3x)-1);ln(e^(-20b)+e^(-30t(x-0.2sin(z-0.6),y,z)))"],
    ["Amogus", "#&#32;smoothed&#32;union;s_min(x,y,k)=-ln(e^(-kx)+e^(-ky))/k;#&#32;body&#32;parts&#32;(L^p&#32;ellipsoids);s_body=(1.5|y|)^3+|x|^3+(z/1.4)^4-1+0.1z;s_leg=(1.9|y|)^3+(2.5abs(|x|-0.5))^3.5+(z+1)^2-1;s_eyes=(4(y-0.8))^4+(1.5x)^2+(2(z-0.3))^4-1;s_back=(3(y+0.8))^4+(1.3x)^2+(1.2(z+0.1))^4-1;#&#32;put&#32;them&#32;together;s_min(s_min(s_min(s_body,s_leg,2),s_eyes,2),s_back,2)"],
    ["Nut SDF", "s_max(a,b,k)=max(a,b)+max(k-|a-b|,0)/2;b=0.35;r_c=0.5;h0=hypot(x,y)-sec(1/3asin(sin(3atan(y,x)));h1=max(h0,hypot(z,0.02)-b);c1=r_c-hypot(x,y)+0.02arcsin(sin(zround(4pi/b)-atan(y,x)))*max(1-z^2/b^2,0);h2=s_max(h1,c1,0.1);b1=hypot(b,0.1);max(h2,(hypot(x,y,z/b1)-0.99hypot(1,b/b1))/hypot(2,b1))"],
    // ["Spacecraft", "s(x,y,z)=x^2+y^2+z^2-(1+|yz|^2+e^(10(0.5+x-y^2-z^2))sin(1000xyz));t(x,y,z)=s(x+z-0.8((x-z)^2+y^2),1.4y,asin(sin(x-z));t(x-y+1,y+x,2z+1)"],
    ["Ice Cream", "#&#32;cylindrical&#32;coordinates;r=hypot(x,y);a=atan(y,x);#&#32;ice&#32;cream;n1=0.2r*asin(sin(5a+5z));c(x,y,z)=r^2+(z+r)^2-1.1+n1;#&#32;holder;p(z)=min(max(z,0.15z),0.1z+0.15);n2=0.01min(r^4,1)*min(sin(40a),sin(40z));h(x,y,z)=max(|max(r-1-p(z-0.8),-1-z)|-0.05,z-1.5)+n2;#&#32;union;u(x,y,z)=min(c(x,y,z-2),5h(x,y,z+0.8));1/1.5&#32;u(1.5x,1.5y,1.5z+0.3)=0"],
    ["Vine Strand", "#&#32;polar&#32;repetition;r=hypot(x,y);a0=atan(y,x);a=asin(sin(1.5a0))/1.5;w=0.1+0.5ln(ln(e^-z+e));#&#32;cross&#32;section&#32;of&#32;a&#32;single&#32;vine;x1=rcos(a)-w^2;y1=rsin(a);w_t=w*(1+0.1sin(3(atan(y1,x1)));d(x,y,z)=hypot(x1,y1)-(0.5w_t^1.3-0.1);#&#32;twist&#32;the&#32;strands;r_z=5asinh(z-2);1.5d(xcos(r_z)-ysin(r_z),xsin(r_z)+ycos(r_z),z-3)"],
    ["DNA Strands", "#&#32;polar&#32;coordinates;r=hypot(x,y);a=atan(y,x)+0.8z;#&#32;strand;s0=hypot(sin(a),sin(pi-a),r-1)-0.25;s=s0-0.15sin(10x)sin(10y)sin(10z);#&#32;cross&#32;line;c=hypot(sin(3z),rsin(a))-0.2;#&#32;double&#32;helix;s_max(a,b,k)=1/k*ln(e^(ka)+e^(kb));h(x,y,z)=s_max(-s,-s_max(c,r-1,10),10)+0.05;#&#32;repetition;h_r=h(mod(x-sin(0.4y),8)-4,mod(y,6)-3,z+0.1sin(x)sin(y));#&#32;bubbles;b=(1.01+sin(0.9x+1.2y))(sin(2x)sin(2y)sin(2z-sin(2x)sin(y))-e^(-0.05sin(x)cos(y)));#&#32;put&#32;together;g(x,y,z)=max(h_r,b);-0.5g(2x,2y,2z)=0"],
    ["Hexa Snails", "f1(x,y,z)=xcos(6ln(hypot(x,y)))+ysin(6ln(hypot(x,y)))+4(z+0.8hypot(x,y))^2-hypot(x,y)+0.2(x^2+y^2+z^2)^2-0.5;a1=asin(cos(-3atan(y,x))/3);s1=f1(hypot(x,y)cos(a1)-5,hypot(x,y)sin(a1),z);f2(x,y,z)=hypot(x-1,10y,ze^(z+0.1x^2)-4)(1+0.05ln(e^z+1)sin(15x)sin(20y)sin(10z))-4;a2=asin(sin(-3atan(y,x))/3);s2=f2(hypot(x,y)cos(a2),hypot(x,y)sin(a2),z+1.5-e^-hypot(x,y,0.5));s(x,y,z)=min(s1,s2);1/2s(2x,2y,2z-1)"],
    ["Nautilus Shell", "#&#32;catesian&#32;to&#32;cylindrical;s_s(x)=3clamp(x,0,1)^2-2clamp(x,0,1)^3&#32;&#32;#&#32;smoothstep;r=hypot(x,y);a=0.45s_s(0.5(r-0.6))&#32;&#32;#&#32;rotate&#32;this&#32;angle;x1=cos(a)x+sin(a)y;y1=cos(a)y-sin(a)x;t=atan2(y1,x1)&#32;&#32;#&#32;polar&#32;angle;;#&#32;shell&#32;opening,&#32;kill&#32;discontinuities&#32;of&#32;the&#32;spiral;b=0.17&#32;&#32;#&#32;r&#32;=&#32;e^(b&#32;\\theta);r_o=e^(bpi)&#32;&#32;#&#32;center&#32;of&#32;the&#32;\"ring\";d_o=hypot(hypot(x1+r_o,z)-r_o,y1)&#32;&#32;#&#32;distance&#32;to&#32;the&#32;\"ring\";;#&#32;spiral;#&#32;r(n)&#32;=&#32;exp(b*(2.*PI*n+t)),&#32;(x-r)^2+y^2=r^2,&#32;solve&#32;for&#32;n;n=min((log((r^2+z^2)/(2r))/b-t)/(2pi),0)&#32;&#32;#&#32;decimal&#32;n,&#32;clamped&#32;to&#32;opening;r0=exp(b(2pifloor(n)+t))&#32;&#32;#&#32;choose&#32;the&#32;closest&#32;side;r1=exp(b(2piceil(n)+t));d0=abs(hypot(r-r0,z)-r0);d1=abs(hypot(r-r1,z)-r1);d_s=min(d_o,d0,d1);u=2pi*if(d1-d0,floor(n),ceil(n))+t;;#&#32;septa/chambers;f=2.4&#32;&#32;#&#32;\"frequency\"&#32;of&#32;chambers;s0=t+2pi(floor(n)+0.5)&#32;&#32;#&#32;longitude&#32;parameter;v=fract(n)&#32;&#32;#&#32;0-1,&#32;distance&#32;from&#32;inner&#32;circle;s1=fs0+sqrt(0.25-(v-0.5)^2)+0.5v&#32;&#32;#&#32;curve&#32;of&#32;septa;s=s1+(min(1/(40hypot(v-0.5,z)+1),0.5)^2&#32;&#32;#&#32;hole&#32;on&#32;septa;s_f=if(s0+1.8,abs(s+3.25),min(fract(s),1-fract(s)))&#32;&#32;#&#32;outermost&#32;and&#32;inner&#32;septa;w=if(s0-0.06sin(2.5r)+1.78,abs(s+3.25),min(fract(s),1-fract(s)))*(exp(b(s0+pi))/f)&#32;&#32;#&#32;adjust&#32;distance&#32;field;d_sc=if(hypot(x,y,1.5z)-3,d_s,min(d_s,0.5w+0.012))&#32;&#32;#&#32;union&#32;with&#32;discontinuity&#32;clamping;;#&#32;put&#32;them&#32;together;d3=d_sc+0.00012rsin(200u)&#32;&#32;#&#32;geometric&#32;texture;d(x,y,z)=abs(d3)-0.8max(0.02r^0.4,0.02)&#32;&#32;#&#32;thickness&#32;of&#32;shell;max(d(-1.5x-0.8,1.5z+0.2,1.5y)-0.005,|y|-0.1)&#32;&#32;#&#32;rotate&#32;+&#32;cut&#32;open"],
    ["Conch Shell", "a_o=0.16pi&#32;#&#32;half&#32;of&#32;opening&#32;angle;b=0.6&#32;#&#32;r=e^bt;s_min(a,b,k)=-1/k*ln(e^-ka+e^-kb)&#32;#&#32;smoothed&#32;minimum;;#&#32;Cross&#32;section;C_m(u,v)=1-(1-0.01e^sin(12pi(u+2v)))e^-(5v)^2&#32;&#32;#&#32;mid&#32;rod;C_s(u,v)=(sqrt((u-e^-16v)^2+(v(1-0.2exp(-4sqrt(u^2+0.1^2)))-0.5+0.5e^(-v)sin(4u)+0.2cos(2u)e^-v)^2)-0.55)tanh(5sqrt(2u^2+(v-1.2)^2))+0.01sin(40u)sin(40v)exp(-(u^2+v^2));C0(u,v)=abs(C_s(u,v))C_m(u,v)&#32;#&#32;single&#32;layer;n1(u,v)=log(hypot(u,v))/b+2&#32;#&#32;index&#32;of&#32;layer;a1(u,v)=atan(v,u)/a_o&#32;#&#32;opening&#32;angle,&#32;0-1;d1(u,v,s_d)=0.5sqrt(u^2+v^2)*C0(if(n1(u,v),n1(u,v)-s_d,fract(n1(u,v))-s_d),a1(u,v));C(u,v)=min(d1(u,v,0.5),d1(u,v,1.5))&#32;#&#32;cross&#32;section;;#&#32;Spiral;l_p(x,y)=exp(b*atan(y,x)/(2pi))&#32;#&#32;a&#32;multiplying&#32;factor;U(x,y,z)=exp(log(-z)+b*atan(y,x)/(2pi))&#32;#&#32;xyz&#32;to&#32;cross&#32;section&#32;u;V(x,y,z)=sqrt(x^2+y^2)*l_p(x,y)&#32;#&#32;xyz&#32;to&#32;cross&#32;section&#32;v;S_s(x,y,z)=C(U(x,y,z),V(x,y,z))/l_p(x,y)&#32;#&#32;body;S_o(x,y,z)=sqrt((C(exp(log(-z)-b/2),-x*exp(-b/2))*exp(b/2))^2+y^2)&#32;#&#32;opening;S_t(x,y,z)=d1(-z,hypot(x,y),0.5)&#32;#&#32;tip;S_a(x,y,z)=if(-z,min(S_s(x,y,z),S_o(x,y,z)),S_t(x,y,z))&#32;#&#32;body+tip;S0(x,y,z)=S_a(x,y,z)-0.01-0.01(x^2+y^2+z^2)^0.4-0.02sqrt(x^2+y^2)exp(cos(8atan(y,x)))-0.007*(0.5-0.5tanh(10(z+1+8sqrt(3x^2+y^2))))&#32;#&#32;subtract&#32;thickness;S(x,y,z)=-s_min(-S0(x,y,z),z+1.7,10)&#32;#&#32;clip&#32;bottom;r_a=-0.05sin(3z)tanh(2(x^2+y^2-z-1.5))&#32;#&#32;distortion;S(0.4(x-r_a*y),0.4(y+r_a*x),0.4z-0.7)=0"],
];

const builtinStates = [
    {
        "name": "Red Flower",
        "id": "red-flower",
        "state": {"input":"a=atan2(z,x)+pi/2\n(x^2+z^2)^2+16y^2=2(x^2+z^2)(sin(2.5a)^2+0.5sin(10a)^2)","params":{"cLatex":true,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":true,"bYup":false,"sSpp":"256","sLightPathDepth":"64","cMis":false,"sClip":"1","cClosed":true,"sDenoise":"null","sTonemap":"None","rScale1":0.5,"rScale2":0.5,"fAppearance1":true,"sColor":"2","sField":"0","bGrid":false,"bDiscontinuity":true,"rOpacity":0,"rIor":1.7009999999999998,"rRoughness1":0,"rMetallic1":1,"rTint1":1,"rEmission1":0,"rAbsorb1":0.49995,"rVEmission1":0,"rScatter1":0,"rScatterAniso1":0,"fAppearance2":true,"rBrightness2":0.875,"rContrast2":0.2,"rRoughness2":0.3,"rMetallic2":1,"rIor2":0.9990000000000001,"rTint2":1,"rEmission2":0,"rAbsorb2":0,"rVDecayAbs":0.5004000000000001,"rVAbsorbHue":0,"rVAbsorbChr":0.4,"rVEmission2":0,"rScatter2":0,"rScatterAniso2":0,"rVDecaySca":0.01,"rVSharpSca":0,"fLighting":true,"rTheta":-0.546637121724624,"rPhi":2.356194490192345,"rLightIntensity":0.5,"rLightSky":0.2,"rLightAmbient":0,"rLightSoftness":0.8002,"rLightHardness":0,"fCamera":true,"fov":0.7863406411935253,"rExposure":0.5,"ry":0,"rCameraDistortion":0.5,"rFocalLength":0.5,"rApertureSize":0.28538,"rApertureShape":0,"rApertureRotate":0},"state":{"name":"spirulae.implicit3-rt.state","iFrame":177,"width":924,"height":595,"screenCenter":{"x":0.32812050823525435,"y":0.5},"defaultScreenCenter":true,"worldSpace":true,"iTime":-1,"rz":-3.054513020910302,"rx":-1.5379644737231006,"ry":0,"fov":0.7863406411935253,"scale":0.5344202287234547,"clipSize":[2,2,2],"rTheta":-0.546637121724624,"rPhi":2.356194490192345,"renderNeeded":false,"cLatex":true,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":true,"bYup":false,"sSpp":256,"sClip":"1","cClosed":true,"sDenoise":"null","rScale1":0.5,"rScale2":0.5,"sColor":"2","sField":"0","bGrid":false,"bDiscontinuity":true,"fAppearance":false,"rOpacity":0,"rIor":1.7009999999999998,"rRoughness1":0,"rRoughness2":0.3,"rEmission1":0,"rEmission2":0,"rAbsorb1":0.49995,"rAbsorb2":0,"rScatter1":0,"rScatter2":0,"rVDecayAbs":0.5004000000000001,"rVDecaySca":0.01,"rVAbsorbHue":0,"rVAbsorbChr":0.4,"rVAbsorbBri":0.97,"fLighting":true,"rLightIntensity":0.5,"rLightSky":0.2,"rLightAmbient":0,"rLightSoftness":0.8002,"rLightHardness":0,"fCamera":true,"rExposure":0.5,"rCameraDistortion":0.5,"rFocalLength":0.5,"rApertureSize":0.28538,"rApertureShape":0,"rApertureRotate":0,"sLightPathDepth":"64","cMis":false,"sTonemap":"None","fAppearance1":null,"rMetallic1":1,"rTint1":1,"rVEmission1":0,"rScatterAniso1":0,"fAppearance2":null,"rBrightness2":0.875,"rContrast2":0.2,"rMetallic2":1,"rIor2":1,"rTint2":1,"rVEmission2":0,"rScatterAniso2":0,"rVSharpSca":0}}
    },
    {
        "name": "Lily Leaf",
        "id": "lily-leaf",
        "state": {"input":"a=atan2(z,x)+pi/2\n(x^2+z^2)^2+16y^2=2(x^2+z^2)(sin(a/2)^2+1/2sin(10a)^2)\nc_hsv=vec3(3atan2(y,x),hypot(x,y),1)","params":{"cLatex":true,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":true,"bYup":false,"sSpp":"256","sLightPathDepth":"64","cMis":false,"sClip":"1","cClosed":true,"sDenoise":"null","sTonemap":"None","rScale1":0.5,"rScale2":0.5,"fAppearance1":true,"sColor":"2","sField":"0","bGrid":false,"bDiscontinuity":true,"rOpacity":0,"rIor":1.7009999999999998,"rRoughness1":0,"rMetallic1":1,"rTint1":1,"rEmission1":0,"rAbsorb1":0.49995,"rVEmission1":0,"rScatter1":0,"rScatterAniso1":0,"fAppearance2":true,"rBrightness2":0.875,"rContrast2":0.2,"rRoughness2":0.3,"rMetallic2":1,"rIor2":0.9990000000000001,"rTint2":1,"rEmission2":0,"rAbsorb2":0,"rVDecayAbs":0.5004000000000001,"rVAbsorbHue":0,"rVAbsorbChr":0.4,"rVEmission2":0,"rScatter2":0,"rScatterAniso2":0,"rVDecaySca":0.01,"rVSharpSca":0,"fLighting":true,"rTheta":3.2421236185046665,"rPhi":2.356194490192345,"rLightIntensity":0.5,"rLightSky":0.2,"rLightAmbient":0,"rLightSoftness":0.8002,"rLightHardness":0,"fCamera":true,"fov":0.7863406411935253,"rExposure":0.5,"ry":0,"rCameraDistortion":0.5,"rFocalLength":0.5,"rApertureSize":0.6764,"rApertureShape":0,"rApertureRotate":0},"state":{"name":"spirulae.implicit3-rt.state","iFrame":252,"width":1848,"height":600,"screenCenter":{"x":0.39062050823525424,"y":0.3915159038822141},"defaultScreenCenter":false,"worldSpace":true,"iTime":-1,"rz":-7.044513020910296,"rx":-1.7779644737231008,"ry":0,"fov":0.7863406411935253,"scale":0.7478350817011133,"clipSize":[2,2,2],"rTheta":3.2421236185046665,"rPhi":2.356194490192345,"renderNeeded":false,"cLatex":true,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":true,"bYup":false,"sSpp":256,"sClip":"1","cClosed":true,"sDenoise":"null","rScale1":0.5,"rScale2":0.5,"sColor":"2","sField":"0","bGrid":false,"bDiscontinuity":true,"fAppearance":false,"rOpacity":0,"rIor":1.7009999999999998,"rRoughness1":0,"rRoughness2":0.3,"rEmission1":0,"rEmission2":0,"rAbsorb1":0.49995,"rAbsorb2":0,"rScatter1":0,"rScatter2":0,"rVDecayAbs":0.5004000000000001,"rVDecaySca":0.01,"rVAbsorbHue":0,"rVAbsorbChr":0.4,"rVAbsorbBri":0.97,"fLighting":true,"rLightIntensity":0.5,"rLightSky":0.2,"rLightAmbient":0,"rLightSoftness":0.8002,"rLightHardness":0,"fCamera":true,"rExposure":0.5,"rCameraDistortion":0.5,"rFocalLength":0.5,"rApertureSize":0.6764,"rApertureShape":0,"rApertureRotate":0,"sLightPathDepth":"64","cMis":false,"sTonemap":"None","fAppearance1":true,"rMetallic1":1,"rTint1":1,"rVEmission1":0,"rScatterAniso1":0,"fAppearance2":true,"rBrightness2":0.875,"rContrast2":0.2,"rMetallic2":1,"rIor2":0.9990000000000001,"rTint2":1,"rVEmission2":0,"rScatterAniso2":0,"rVSharpSca":0}}
    },
    {
        "name": "Spheres",
        "id": "spheres",
        "state": {"input":"sin(x)sin(y)sin(z)+0.8\ns(x)=1/(1+exp(-x))\nc_rgb=vec3(s(x),s(y),s(z))","params":{"cLatex":true,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":true,"bYup":false,"sSpp":"256","sLightPathDepth":"64","cMis":false,"sClip":"1","cClosed":true,"sDenoise":"null","sTonemap":"Aces","rScale1":0.74892,"rScale2":0.5,"fAppearance1":false,"sColor":"2","sField":"0","bGrid":false,"bDiscontinuity":true,"rOpacity":1,"rIor":3,"rRoughness1":0,"rMetallic1":0,"rTint1":1,"rEmission1":0,"rAbsorb1":0.49995,"rVEmission1":0,"rScatter1":0,"rScatterAniso1":0,"fAppearance2":false,"rBrightness2":0.572,"rContrast2":0.2,"rRoughness2":0,"rMetallic2":0,"rIor2":3,"rTint2":0,"rEmission2":0,"rAbsorb2":0.49401,"rVDecayAbs":0.5004000000000001,"rVAbsorbHue":0.564,"rVAbsorbChr":0.4,"rVEmission2":0.093,"rScatter2":0,"rScatterAniso2":0,"rVDecaySca":0.2525,"rVSharpSca":0,"fLighting":true,"rTheta":3.1667253948185117,"rPhi":2.767743127812608,"rLightIntensity":0.5,"rLightSky":0,"rLightAmbient":0,"rLightSoftness":0.8002,"rLightHardness":0,"fCamera":true,"fov":0.7863406411935253,"rExposure":0.5,"ry":0,"rCameraDistortion":0.5,"rFocalLength":0.5,"rApertureSize":0.36769999999999997,"rApertureShape":0,"rApertureRotate":0},"state":{"name":"spirulae.implicit3-rt.state","iFrame":84,"width":924,"height":600,"screenCenter":{"x":0.32812050823525435,"y":0.5},"defaultScreenCenter":true,"worldSpace":true,"iTime":-1,"rz":-9.064513020910269,"rx":-1.717964473723101,"ry":0,"fov":0.7863406411935253,"scale":0.40100844007602443,"clipSize":[2,2,2],"rTheta":3.1667253948185117,"rPhi":2.767743127812608,"renderNeeded":false,"cLatex":true,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":true,"bYup":false,"sSpp":256,"sClip":"1","cClosed":true,"sDenoise":"null","rScale1":0.74892,"rScale2":0.5,"sColor":"2","sField":"0","bGrid":false,"bDiscontinuity":true,"fAppearance":false,"rOpacity":1,"rIor":3,"rRoughness1":0,"rRoughness2":0,"rEmission1":0,"rEmission2":0,"rAbsorb1":0.49995,"rAbsorb2":0.49401,"rScatter1":0,"rScatter2":0,"rVDecayAbs":0.5004000000000001,"rVDecaySca":0.2525,"rVAbsorbHue":0.564,"rVAbsorbChr":0.4,"rVAbsorbBri":0.97,"fLighting":true,"rLightIntensity":0.5,"rLightSky":0,"rLightAmbient":0,"rLightSoftness":0.8002,"rLightHardness":0,"fCamera":true,"rExposure":0.5,"rCameraDistortion":0.5,"rFocalLength":0.5,"rApertureSize":0.36769999999999997,"rApertureShape":0,"rApertureRotate":0,"sLightPathDepth":"64","cMis":false,"sTonemap":"Aces","fAppearance1":false,"rMetallic1":0,"rTint1":1,"rVEmission1":0,"rScatterAniso1":0,"fAppearance2":false,"rBrightness2":0.572,"rContrast2":0.2,"rMetallic2":0,"rIor2":3,"rTint2":0,"rVEmission2":0.093,"rScatterAniso2":0,"rVSharpSca":0}}
    },
    {
        "name": "Burning Ship",
        "id": "burning-ship",
        "state": {"input":"c=-vec2(x,y)-vec2(1/4,1/2)\nf(z)=vec2(z.x^2-z.y^2,2|z.xz.y|)+c\ng=f(f(f(f(f(f(c\nz=0.8|g|^-0.4-1","params":{"cLatex":true,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":false,"bYup":false,"sSpp":"256","sLightPathDepth":"64","cMis":false,"sClip":"2","cClosed":true,"sDenoise":"null","sTonemap":"None","rScale1":0.5,"rScale2":0.5,"fAppearance1":true,"sColor":"1","sField":"0","bGrid":false,"bDiscontinuity":true,"rOpacity":0,"rIor":1.7009999999999998,"rRoughness1":0,"rMetallic1":1,"rTint1":1,"rEmission1":0,"rAbsorb1":0.49995,"rVEmission1":0,"rScatter1":0,"rScatterAniso1":0,"fAppearance2":true,"rBrightness2":0.875,"rContrast2":0.2,"rRoughness2":0.57,"rMetallic2":1,"rIor2":0.9990000000000001,"rTint2":1,"rEmission2":0,"rAbsorb2":0,"rVDecayAbs":0.5496800000000001,"rVAbsorbHue":0.142,"rVAbsorbChr":0.4,"rVEmission2":0,"rScatter2":0,"rScatterAniso2":0,"rVDecaySca":0.08663,"rVSharpSca":0,"fLighting":true,"rTheta":-1.4451326206513049,"rPhi":2.6734953482049137,"rLightIntensity":0.5,"rLightSky":0,"rLightAmbient":0,"rLightSoftness":0.517483,"rLightHardness":0,"fCamera":true,"fov":1.1442308762904747,"rExposure":0.5,"ry":0,"rCameraDistortion":0.5,"rFocalLength":0.5,"rApertureSize":0.01,"rApertureShape":0,"rApertureRotate":0},"state":{"name":"spirulae.implicit3-rt.state","iFrame":25,"width":924,"height":595,"screenCenter":{"x":0.32812050823525435,"y":0.5},"defaultScreenCenter":true,"worldSpace":true,"iTime":-1,"rz":-2.914513020910296,"rx":-1.6979644737231008,"ry":0,"fov":1.1442308762904747,"scale":0.5336725638907442,"clipSize":[2,2,2],"rTheta":-1.4451326206513049,"rPhi":2.6734953482049137,"renderNeeded":false,"cLatex":true,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":false,"bYup":false,"sSpp":256,"sClip":"2","cClosed":true,"sDenoise":"null","rScale1":0.5,"rScale2":0.5,"sColor":"1","sField":"0","bGrid":false,"bDiscontinuity":true,"fAppearance":false,"rOpacity":0,"rIor":1.7009999999999998,"rRoughness1":0,"rRoughness2":0.57,"rEmission1":0,"rEmission2":0,"rAbsorb1":0.49995,"rAbsorb2":0,"rScatter1":0,"rScatter2":0,"rVDecayAbs":0.5496800000000001,"rVDecaySca":0.08663,"rVAbsorbHue":0.142,"rVAbsorbChr":0.4,"rVAbsorbBri":0.97,"fLighting":true,"rLightIntensity":0.5,"rLightSky":0,"rLightAmbient":0,"rLightSoftness":0.517483,"rLightHardness":0,"fCamera":true,"rExposure":0.5,"rCameraDistortion":0.5,"rFocalLength":0.5,"rApertureSize":0.01,"rApertureShape":0,"rApertureRotate":0,"sLightPathDepth":"64","cMis":false,"sTonemap":"None","fAppearance1":null,"rMetallic1":1,"rTint1":1,"rVEmission1":0,"rScatterAniso1":0,"fAppearance2":null,"rBrightness2":0.875,"rContrast2":0.2,"rMetallic2":1,"rIor2":1,"rTint2":1,"rVEmission2":0,"rScatterAniso2":0,"rVSharpSca":0}}
    },
    {
        "name": "Gamma Function",
        "id": "gamma-function",
        "state": {"input":"c=gamma(x+yi)\nz=|c|\nc_hsv=vec3(arg(c),1,1)","params":{"cLatex":true,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":true,"bYup":false,"sSpp":"256","sLightPathDepth":"64","cMis":false,"sClip":"2","cClosed":true,"sDenoise":"null","sTonemap":"None","rScale1":0.6783600000000001,"rScale2":0.5,"fAppearance1":true,"sColor":"2","sField":"0","bGrid":false,"bDiscontinuity":true,"rOpacity":1,"rIor":3,"rRoughness1":0,"rMetallic1":0,"rTint1":0,"rEmission1":0,"rAbsorb1":0.49995,"rVEmission1":0,"rScatter1":0,"rScatterAniso1":0,"fAppearance2":true,"rBrightness2":0.875,"rContrast2":0.2,"rRoughness2":0.3,"rMetallic2":1,"rIor2":0.9990000000000001,"rTint2":1,"rEmission2":0,"rAbsorb2":0,"rVDecayAbs":0.5496800000000001,"rVAbsorbHue":0.142,"rVAbsorbChr":0.4,"rVEmission2":0,"rScatter2":0,"rScatterAniso2":0,"rVDecaySca":0.08663,"rVSharpSca":0,"fLighting":true,"rTheta":3.0410616886749198,"rPhi":2.305929007734908,"rLightIntensity":0.5,"rLightSky":0,"rLightAmbient":0,"rLightSoftness":0.649351,"rLightHardness":0,"fCamera":true,"fov":0.7863406411935253,"rExposure":0.5,"ry":0,"rCameraDistortion":0.5,"rFocalLength":0.5,"rApertureSize":0.45982,"rApertureShape":0,"rApertureRotate":0},"state":{"name":"spirulae.implicit3-rt.state","iFrame":256,"width":924,"height":600,"screenCenter":{"x":0.32812050823525435,"y":0.5},"defaultScreenCenter":true,"worldSpace":true,"iTime":-1,"rz":-6.754513020910291,"rx":-1.3079644737231004,"ry":0,"fov":0.7863406411935253,"scale":0.48230778804133084,"clipSize":[2,2,2],"rTheta":3.0410616886749198,"rPhi":2.305929007734908,"renderNeeded":false,"cLatex":true,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":true,"bYup":false,"sSpp":256,"sLightPathDepth":"64","cMis":false,"sClip":"2","cClosed":true,"sDenoise":"null","sTonemap":"None","rScale1":0.6783600000000001,"rScale2":0.5,"fAppearance1":true,"sColor":"2","sField":"0","bGrid":false,"bDiscontinuity":true,"rOpacity":1,"rIor":3,"rRoughness1":0,"rMetallic1":0,"rTint1":0,"rEmission1":0,"rAbsorb1":0.49995,"rVEmission1":0,"rScatter1":0,"rScatterAniso1":0,"fAppearance2":true,"rBrightness2":0.875,"rContrast2":0.2,"rRoughness2":0.3,"rMetallic2":1,"rIor2":0.9990000000000001,"rTint2":1,"rEmission2":0,"rAbsorb2":0,"rVDecayAbs":0.5496800000000001,"rVAbsorbHue":0.142,"rVAbsorbChr":0.4,"rVEmission2":0,"rScatter2":0,"rScatterAniso2":0,"rVDecaySca":0.08663,"rVSharpSca":0,"fLighting":true,"rLightIntensity":0.5,"rLightSky":0,"rLightAmbient":0,"rLightSoftness":0.649351,"rLightHardness":0,"fCamera":true,"rExposure":0.5,"rCameraDistortion":0.5,"rFocalLength":0.5,"rApertureSize":0.45982,"rApertureShape":0,"rApertureRotate":0}}
    },
    {
        "name": "Fractal Sponge",
        "id": "fractal-sponge",
        "state": {"input":"w(x,y)=sqrt(x^2-|x|y+y^2)\nf0(x,y,z)=min(w(x,y),w(x,z),w(y,z))-1\nr(x)=6/piasin(sin(pi/6x)\nf(n)=f0(r(nx),r(ny),r(nz))\nb=max(|x|,|y|,|z|)-1\nh=min(f(3),f(9),f(27),f(81),f(243))\nmax(5b,-h)","params":{"cLatex":true,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":false,"bYup":false,"sSpp":"256","sLightPathDepth":"16","cMis":false,"sClip":"1","cClosed":true,"sDenoise":"null","sTonemap":"None","rScale1":0.33928,"rScale2":0.5,"fAppearance1":true,"sColor":"2","sField":"0","bGrid":false,"bDiscontinuity":true,"rOpacity":1,"rIor":1.7009999999999998,"rRoughness1":0.57,"rMetallic1":1,"rTint1":1,"rEmission1":0,"rAbsorb1":0.49995,"rVEmission1":0,"rScatter1":0,"rScatterAniso1":0,"fAppearance2":true,"rBrightness2":0.875,"rContrast2":0.2,"rRoughness2":0,"rMetallic2":1,"rIor2":0.9990000000000001,"rTint2":1,"rEmission2":0,"rAbsorb2":0,"rVDecayAbs":0.5004000000000001,"rVAbsorbHue":0,"rVAbsorbChr":0.4,"rVEmission2":0,"rScatter2":0,"rScatterAniso2":0,"rVDecaySca":0.01,"rVSharpSca":0,"fLighting":true,"rTheta":-0.7979645340118074,"rPhi":2.3593360828459344,"rLightIntensity":0.5,"rLightSky":0.673,"rLightAmbient":0,"rLightSoftness":0.6783220000000001,"rLightHardness":1,"fCamera":true,"fov":0.7863406411935253,"rExposure":0.5,"ry":0,"rCameraDistortion":0.5,"rFocalLength":0.5,"rApertureSize":0.15209999999999999,"rApertureShape":0,"rApertureRotate":0},"state":{"name":"spirulae.implicit3-rt.state","iFrame":51,"width":924,"height":595,"screenCenter":{"x":0.32812050823525435,"y":0.5},"defaultScreenCenter":true,"worldSpace":true,"iTime":-1,"rz":-4.4045130209102865,"rx":-1.5979644737230845,"ry":0,"fov":0.7863406411935253,"scale":1.7385078636153724,"clipSize":[2,2,2],"rTheta":-0.7979645340118074,"rPhi":2.3593360828459344,"renderNeeded":false,"cLatex":true,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":false,"bYup":false,"sSpp":256,"sClip":"1","cClosed":true,"sDenoise":"null","sTonemap":"None","rScale1":0.33928,"rScale2":0.5,"sColor":"2","sField":"0","bGrid":false,"bDiscontinuity":true,"fAppearance":false,"rOpacity":1,"rIor":1.7009999999999998,"rRoughness1":0.57,"rRoughness2":0,"rEmission1":0,"rEmission2":0,"rAbsorb1":0.49995,"rAbsorb2":0,"rScatter1":0,"rScatter2":0,"rVDecayAbs":0.5004000000000001,"rVDecaySca":0.01,"rVAbsorbHue":0,"rVAbsorbChr":0.4,"rVAbsorbBri":0.97,"fLighting":true,"rLightIntensity":0.5,"rLightSky":0.673,"rLightAmbient":0,"rLightSoftness":0.6783220000000001,"rLightHardness":1,"fCamera":true,"rExposure":0.5,"rCameraDistortion":0.5,"rFocalLength":0.5,"rApertureSize":0.15209999999999999,"rApertureShape":0,"rApertureRotate":0,"sLightPathDepth":"16","cMis":false,"fAppearance1":true,"rMetallic1":1,"rTint1":1,"rVEmission1":0,"rScatterAniso1":0,"fAppearance2":true,"rBrightness2":0.875,"rContrast2":0.2,"rMetallic2":1,"rIor2":0.9990000000000001,"rTint2":1,"rVEmission2":0,"rScatterAniso2":0,"rVSharpSca":0}}
    },
    {
        "name": "Womb",
        "id": "womb",
        "state": {"input":"(x^2-1)^2+(y^2-1)^2+(z^2-1)^2+4(x^2y^2+x^2z^2+y^2z^2)+8xyz-2(x^2+y^2+z^2)","params":{"cLatex":true,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":false,"bYup":false,"sSpp":"256","sLightPathDepth":"128","cMis":false,"sClip":"1","cClosed":true,"sDenoise":"null","sTonemap":"Aces","rScale1":0.5,"rScale2":0.5,"fAppearance1":false,"sColor":"2","sField":"0","bGrid":false,"bDiscontinuity":true,"rOpacity":0,"rIor":1.7009999999999998,"rRoughness1":0,"rMetallic1":1,"rTint1":1,"rEmission1":0,"rAbsorb1":0.39204,"rVEmission1":0,"rScatter1":0.83556,"rScatterAniso1":-0.99,"fAppearance2":false,"rBrightness2":0.875,"rContrast2":0.2,"rRoughness2":0.687,"rMetallic2":1,"rIor2":0.9990000000000001,"rTint2":1,"rEmission2":0,"rAbsorb2":0,"rVDecayAbs":0.5004000000000001,"rVAbsorbHue":0.551,"rVAbsorbChr":0.4,"rVEmission2":0,"rScatter2":0.69597,"rScatterAniso2":-0.99,"rVDecaySca":0.49985,"rVSharpSca":0,"fLighting":true,"rTheta":3.141592653589793,"rPhi":2.356194490192345,"rLightIntensity":0.5,"rLightSky":0,"rLightAmbient":0,"rLightSoftness":0.52048,"rLightHardness":0,"fCamera":true,"fov":1.6447180019338645,"rExposure":0.5,"ry":0,"rCameraDistortion":0.5,"rFocalLength":0.5,"rApertureSize":0.46178,"rApertureShape":0,"rApertureRotate":0},"state":{"name":"spirulae.implicit3-rt.state","iFrame":32,"width":924,"height":595,"screenCenter":{"x":0.1974386900534362,"y":0.522689075630252},"defaultScreenCenter":false,"worldSpace":true,"iTime":-1,"rz":-2.7045130209103183,"rx":-2.2679644737230915,"ry":0,"fov":1.6447180019338645,"scale":1.2172901450720157,"clipSize":[2,2,2],"rTheta":3.141592653589793,"rPhi":2.356194490192345,"renderNeeded":false,"cLatex":true,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":false,"bYup":false,"sSpp":256,"sClip":"1","cClosed":true,"sDenoise":"null","sTonemap":"Aces","rScale1":0.5,"rScale2":0.5,"sColor":"2","sField":"0","bGrid":false,"bDiscontinuity":true,"fAppearance1":false,"rOpacity":0,"rIor":1.7009999999999998,"rRoughness1":0,"rEmission1":0,"rAbsorb1":0.39204,"rVEmission1":0,"rScatter1":0.83556,"rScatterAniso1":-0.99,"fAppearance2":false,"rRoughness2":0.687,"rEmission2":0,"rAbsorb2":0,"rScatter2":0.69597,"rScatterAniso2":-0.99,"rVDecayAbs":0.5004000000000001,"rVDecaySca":0.49985,"rVAbsorbHue":0.551,"rVAbsorbChr":0.4,"fLighting":true,"rLightIntensity":0.5,"rLightSky":0,"rLightAmbient":0,"rLightSoftness":0.52048,"rLightHardness":0,"fCamera":true,"rExposure":0.5,"rCameraDistortion":0.5,"rFocalLength":0.5,"rApertureSize":0.46178,"rApertureShape":0,"rApertureRotate":0,"sLightPathDepth":"128","cMis":false,"rMetallic1":1,"rTint1":1,"rBrightness2":0.875,"rContrast2":0.2,"rMetallic2":1,"rIor2":0.9990000000000001,"rTint2":1,"rVEmission2":0,"rVSharpSca":0}}
    },
    {
        "name": "Complex Sine",
        "id": "complex-sine",
        "state": {"input":"|sin(x+yi)+sin(y+xi)+sin(y+zi)+sin(z+yi)+sin(z+xi)+sin(x+zi)|=1","params":{"cLatex":true,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":false,"bYup":false,"sSpp":"256","sLightPathDepth":"64","cMis":false,"sClip":"1","cClosed":true,"sDenoise":"null","sTonemap":"None","rScale1":0.6783600000000001,"rScale2":0.5,"fAppearance1":true,"sColor":"2","sField":"0","bGrid":false,"bDiscontinuity":true,"rOpacity":1,"rIor":1.7009999999999998,"rRoughness1":0,"rMetallic1":1,"rTint1":1,"rEmission1":0,"rAbsorb1":0.49995,"rVEmission1":0,"rScatter1":0,"rScatterAniso1":0,"fAppearance2":true,"rBrightness2":0.875,"rContrast2":0.2,"rRoughness2":0.3,"rMetallic2":1,"rIor2":0.9990000000000001,"rTint2":1,"rEmission2":0,"rAbsorb2":0,"rVDecayAbs":0.5496800000000001,"rVAbsorbHue":0.142,"rVAbsorbChr":0.4,"rVEmission2":0,"rScatter2":0,"rScatterAniso2":0,"rVDecaySca":0.08663,"rVSharpSca":0,"fLighting":true,"rTheta":3.0410616886749198,"rPhi":2.305929007734908,"rLightIntensity":0.5,"rLightSky":0,"rLightAmbient":0,"rLightSoftness":0.649351,"rLightHardness":0,"fCamera":true,"fov":0.7863406411935253,"rExposure":0.5,"ry":0,"rCameraDistortion":0.5,"rFocalLength":0.5,"rApertureSize":0.45982,"rApertureShape":0,"rApertureRotate":0},"state":{"name":"spirulae.implicit3-rt.state","iFrame":116,"width":924,"height":595,"screenCenter":{"x":0.32812050823525435,"y":0.5},"defaultScreenCenter":true,"worldSpace":true,"iTime":-1,"rz":-3.0345130209103024,"rx":-1.6079644737231007,"ry":0,"fov":0.7863406411935253,"scale":0.3446682894493678,"clipSize":[2,2,2],"rTheta":3.0410616886749198,"rPhi":2.305929007734908,"renderNeeded":false,"cLatex":true,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":false,"bYup":false,"sSpp":256,"sClip":"1","cClosed":true,"sDenoise":"null","rScale1":0.6783600000000001,"rScale2":0.5,"sColor":"2","sField":"0","bGrid":false,"bDiscontinuity":true,"fAppearance":false,"rOpacity":1,"rIor":1.7009999999999998,"rRoughness1":0,"rRoughness2":0.3,"rEmission1":0,"rEmission2":0,"rAbsorb1":0.49995,"rAbsorb2":0,"rScatter1":0,"rScatter2":0,"rVDecayAbs":0.5496800000000001,"rVDecaySca":0.08663,"rVAbsorbHue":0.142,"rVAbsorbChr":0.4,"rVAbsorbBri":0.97,"fLighting":true,"rLightIntensity":0.5,"rLightSky":0,"rLightAmbient":0,"rLightSoftness":0.649351,"rLightHardness":0,"fCamera":true,"rExposure":0.5,"rCameraDistortion":0.5,"rFocalLength":0.5,"rApertureSize":0.45982,"rApertureShape":0,"rApertureRotate":0,"sLightPathDepth":"64","cMis":false,"sTonemap":"None","fAppearance1":null,"rMetallic1":1,"rTint1":1,"rVEmission1":0,"rScatterAniso1":0,"fAppearance2":null,"rBrightness2":0.875,"rContrast2":0.2,"rMetallic2":1,"rIor2":1,"rTint2":1,"rVEmission2":0,"rScatterAniso2":0,"rVSharpSca":0}}
    },
    {
        "name": "Red Roots",
        "id": "red-roots",
        "state": {"input":"f0(p)=vec2(p.x^2-p.y^2+z,2p.xp.y)\nf(p)=f0(p)+vec2(x,y)\nc=f0(f(f(vec2(x,y))))\nlog(dot(c,c))=0","params":{"cLatex":true,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":false,"bYup":false,"sSpp":"256","sLightPathDepth":"64","cMis":false,"sClip":"1","cClosed":true,"sDenoise":"null","sTonemap":"None","rScale1":0.5,"rScale2":0.5,"fAppearance1":true,"sColor":"2","sField":"0","bGrid":false,"bDiscontinuity":true,"rOpacity":0,"rIor":1.7009999999999998,"rRoughness1":0,"rMetallic1":1,"rTint1":1,"rEmission1":0,"rAbsorb1":0.49995,"rVEmission1":0,"rScatter1":0,"rScatterAniso1":0,"fAppearance2":true,"rBrightness2":0.875,"rContrast2":0.2,"rRoughness2":0.57,"rMetallic2":1,"rIor2":0.9990000000000001,"rTint2":1,"rEmission2":0,"rAbsorb2":0,"rVDecayAbs":0.5496800000000001,"rVAbsorbHue":0.55,"rVAbsorbChr":0.4,"rVEmission2":0,"rScatter2":0.79398,"rScatterAniso2":0,"rVDecaySca":0.19818000000000002,"rVSharpSca":0,"fLighting":false,"rTheta":2.7206192380087613,"rPhi":2.491282974296706,"rLightIntensity":0.5,"rLightSky":0,"rLightAmbient":0,"rLightSoftness":0.836164,"rLightHardness":1,"fCamera":true,"fov":1.1442308762904747,"rExposure":0.5,"ry":0,"rCameraDistortion":0.5,"rFocalLength":0.5,"rApertureSize":0.28538,"rApertureShape":0,"rApertureRotate":0},"state":{"name":"spirulae.implicit3-rt.state","iFrame":256,"width":924,"height":595,"screenCenter":{"x":0.32812050823525435,"y":0.5},"defaultScreenCenter":true,"worldSpace":true,"iTime":-1,"rz":-3.014513020910303,"rx":-1.6279644737231007,"ry":0,"fov":1.1442308762904747,"scale":0.4398274428524963,"clipSize":[2,2,2],"rTheta":2.7206192380087613,"rPhi":2.491282974296706,"renderNeeded":false,"cLatex":true,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":false,"bYup":false,"sSpp":256,"sClip":"1","cClosed":true,"sDenoise":"null","rScale1":0.5,"rScale2":0.5,"sColor":"2","sField":"0","bGrid":false,"bDiscontinuity":true,"fAppearance":false,"rOpacity":0,"rIor":1.7009999999999998,"rRoughness1":0,"rRoughness2":0.57,"rEmission1":0,"rEmission2":0,"rAbsorb1":0.49995,"rAbsorb2":0,"rScatter1":0,"rScatter2":0.79398,"rVDecayAbs":0.5496800000000001,"rVDecaySca":0.19818000000000002,"rVAbsorbHue":0.55,"rVAbsorbChr":0.4,"rVAbsorbBri":0.97,"fLighting":false,"rLightIntensity":0.5,"rLightSky":0,"rLightAmbient":0,"rLightSoftness":0.836164,"rLightHardness":1,"fCamera":true,"rExposure":0.5,"rCameraDistortion":0.5,"rFocalLength":0.5,"rApertureSize":0.28538,"rApertureShape":0,"rApertureRotate":0,"sLightPathDepth":"64","cMis":false,"sTonemap":"None","fAppearance1":null,"rMetallic1":1,"rTint1":1,"rVEmission1":0,"rScatterAniso1":0,"fAppearance2":null,"rBrightness2":0.875,"rContrast2":0.2,"rMetallic2":1,"rIor2":1,"rTint2":1,"rVEmission2":0,"rScatterAniso2":0,"rVSharpSca":0}}
    },
    {
        "name": "Spiral Sky",
        "id": "spiral-sky",
        "state": {"input":"# polar repetition\nr=hypot(x,y)\na0=atan(y,x)\na=asin(sin(1.5a0))/1.5\nw=0.1+0.5ln(ln(e^-z+e))\n# cross section of a single vine\nx1=rcos(a)-w^2\ny1=rsin(a)\nw_t=w*(1+0.1sin(3(atan(y1,x1)))\nd(x,y,z)=hypot(x1,y1)-(0.5w_t^1.3-0.1)\n# twist the strands\nr_z=5asinh(z-2)\n5d(xcos(r_z)-ysin(r_z),xsin(r_z)+ycos(r_z),z-3)","params":{"cLatex":false,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":false,"bYup":false,"sSpp":"256","sLightPathDepth":"64","cMis":false,"sClip":"1","cClosed":true,"sDenoise":"null","sTonemap":"None","rScale1":0.61858,"rScale2":0.5,"fAppearance1":true,"sColor":"2","sField":"0","bGrid":false,"bDiscontinuity":true,"rOpacity":0,"rIor":1.323,"rRoughness1":0,"rMetallic1":1,"rTint1":1,"rEmission1":0,"rAbsorb1":0.76626,"rVEmission1":0,"rScatter1":0,"rScatterAniso1":0,"fAppearance2":true,"rBrightness2":0.875,"rContrast2":0.2,"rRoughness2":0.727,"rMetallic2":1,"rIor2":0.9990000000000001,"rTint2":1,"rEmission2":0,"rAbsorb2":0.07227,"rVDecayAbs":0.3156,"rVAbsorbHue":0.55,"rVAbsorbChr":0.4,"rVEmission2":0,"rScatter2":0,"rScatterAniso2":0,"rVDecaySca":0.49985,"rVSharpSca":0,"fLighting":true,"rTheta":1.8849555921538763,"rPhi":2.6295130510546567,"rLightIntensity":0.5,"rLightSky":1,"rLightAmbient":0,"rLightSoftness":0.8002,"rLightHardness":0,"fCamera":true,"fov":1.1805791032925084,"rExposure":0.5,"ry":0,"rCameraDistortion":0.5,"rFocalLength":0.5,"rApertureSize":0.01,"rApertureShape":0,"rApertureRotate":0},"state":{"name":"spirulae.implicit3-rt.state","iFrame":198,"width":924,"height":595,"screenCenter":{"x":0.32812050823525435,"y":0.5},"defaultScreenCenter":true,"worldSpace":true,"iTime":-1,"rz":-2.294513020910304,"rx":-3.1479644737231083,"ry":0,"fov":1.1805791032925084,"scale":46.95676081816304,"clipSize":[2,2,2],"rTheta":1.8849555921538763,"rPhi":2.6295130510546567,"renderNeeded":false,"cLatex":false,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":false,"bYup":false,"sSpp":256,"sClip":"1","cClosed":true,"sDenoise":"null","rScale1":0.61858,"rScale2":0.5,"sColor":"2","sField":"0","bGrid":false,"bDiscontinuity":true,"fAppearance":false,"rOpacity":0,"rIor":1.323,"rRoughness1":0,"rRoughness2":0.727,"rEmission1":0,"rEmission2":0,"rAbsorb1":0.76626,"rAbsorb2":0.07227,"rScatter1":0,"rScatter2":0,"rVDecayAbs":0.3156,"rVDecaySca":0.49985,"rVAbsorbHue":0.55,"rVAbsorbChr":0.4,"rVAbsorbBri":0.97,"fLighting":true,"rLightIntensity":0.5,"rLightAmbient":0,"rLightSoftness":0.8002,"rLightHardness":0,"fCamera":true,"rExposure":0.5,"rCameraDistortion":0.5,"rFocalLength":0.5,"rApertureSize":0.01,"rApertureShape":0,"rApertureRotate":0,"rLightSky":1,"sLightPathDepth":"64","cMis":false,"sTonemap":"None","fAppearance1":null,"rMetallic1":1,"rTint1":1,"rVEmission1":0,"rScatterAniso1":0,"fAppearance2":null,"rBrightness2":0.875,"rContrast2":0.2,"rMetallic2":1,"rIor2":1,"rTint2":1,"rVEmission2":0,"rScatterAniso2":0,"rVSharpSca":0}}
    },
    {
        "name": "Goursat Surface",
        "id": "goursat-surface",
        "state": {"input":"2(x^4+y^4+z^4)-3(x^2+y^2+z^2)+2","params":{"cLatex":true,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":true,"bYup":false,"sSpp":"256","sLightPathDepth":"64","cMis":false,"sClip":"1","cClosed":true,"sDenoise":"null","sTonemap":"None","rScale1":0.60094,"rScale2":0.5,"fAppearance1":true,"sColor":"1","sField":"0","bGrid":false,"bDiscontinuity":true,"rOpacity":0,"rIor":1.7009999999999998,"rRoughness1":0,"rMetallic1":1,"rTint1":1,"rEmission1":0,"rAbsorb1":0.30888,"rVEmission1":0,"rScatter1":0,"rScatterAniso1":0,"fAppearance2":true,"rBrightness2":0.875,"rContrast2":0.2,"rRoughness2":0.3,"rMetallic2":1,"rIor2":0.9990000000000001,"rTint2":1,"rEmission2":0,"rAbsorb2":0,"rVDecayAbs":0.5004000000000001,"rVAbsorbHue":0.55,"rVAbsorbChr":0.4,"rVEmission2":0,"rScatter2":0,"rScatterAniso2":0,"rVDecaySca":0.15162,"rVSharpSca":0,"fLighting":true,"rTheta":-1.3194689145077132,"rPhi":1.7058848108992577,"rLightIntensity":0.5,"rLightSky":0,"rLightAmbient":0,"rLightSoftness":0.8002,"rLightHardness":0,"fCamera":true,"fov":0.7863406411935253,"rExposure":0.5,"ry":0,"rCameraDistortion":0.5,"rFocalLength":0.5,"rApertureSize":0.37946,"rApertureShape":0,"rApertureRotate":0},"state":{"name":"spirulae.implicit3-rt.state","iFrame":94,"width":924,"height":595,"screenCenter":{"x":0.32812050823525435,"y":0.5},"defaultScreenCenter":true,"worldSpace":true,"iTime":-1,"rz":-4.314513020910295,"rx":-1.7079644737231008,"ry":0,"fov":0.7863406411935253,"scale":0.859871083114945,"clipSize":[2,2,2],"rTheta":-1.3194689145077132,"rPhi":1.7058848108992577,"renderNeeded":false,"cLatex":true,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":true,"bYup":false,"sSpp":256,"sClip":"1","cClosed":true,"sDenoise":"null","rScale1":0.60094,"rScale2":0.5,"sColor":"1","sField":"0","bGrid":false,"bDiscontinuity":true,"fAppearance":false,"rOpacity":0,"rIor":1.7009999999999998,"rRoughness1":0,"rRoughness2":0.3,"rEmission1":0,"rEmission2":0,"rAbsorb1":0.30888,"rAbsorb2":0,"rScatter1":0,"rScatter2":0,"rVDecayAbs":0.5004000000000001,"rVDecaySca":0.15162,"rVAbsorbHue":0.55,"rVAbsorbChr":0.4,"rVAbsorbBri":0.97,"fLighting":true,"rLightIntensity":0.5,"rLightAmbient":0,"rLightSoftness":0.8002,"rLightHardness":0,"fCamera":true,"rExposure":0.5,"rCameraDistortion":0.5,"rFocalLength":0.5,"rApertureSize":0.37946,"rApertureShape":0,"rApertureRotate":0,"rLightSky":0,"sLightPathDepth":"64","cMis":false,"sTonemap":"None","fAppearance1":null,"rMetallic1":1,"rTint1":1,"rVEmission1":0,"rScatterAniso1":0,"fAppearance2":null,"rBrightness2":0.875,"rContrast2":0.2,"rMetallic2":1,"rIor2":1,"rTint2":1,"rVEmission2":0,"rScatterAniso2":0,"rVSharpSca":0}}
    },
    {
        "name": "Soft Barth",
        "id": "soft-barth",
        "state": {"input":"3(x^2+y^2+z^2-1)^2-4(x^2-y^2)(y^2-z^2)(z^2-x^2)","params":{"cLatex":true,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":true,"bYup":false,"sSpp":"256","sLightPathDepth":"64","cMis":false,"sClip":"1","cClosed":true,"sDenoise":"null","sTonemap":"None","rScale1":0.60094,"rScale2":0.5,"fAppearance1":true,"sColor":"1","sField":"0","bGrid":false,"bDiscontinuity":true,"rOpacity":1,"rIor":1.7009999999999998,"rRoughness1":0.418,"rMetallic1":1,"rTint1":1,"rEmission1":0,"rAbsorb1":0.49995,"rVEmission1":0,"rScatter1":0,"rScatterAniso1":0,"fAppearance2":true,"rBrightness2":0.875,"rContrast2":0.2,"rRoughness2":0.3,"rMetallic2":1,"rIor2":0.9990000000000001,"rTint2":1,"rEmission2":0,"rAbsorb2":0,"rVDecayAbs":0.5004000000000001,"rVAbsorbHue":0.55,"rVAbsorbChr":0.4,"rVEmission2":0,"rScatter2":0.87318,"rScatterAniso2":0,"rVDecaySca":0.15162,"rVSharpSca":0,"fLighting":true,"rTheta":3.5060174014062095,"rPhi":2.356194490192345,"rLightIntensity":0.5,"rLightSky":0.2,"rLightAmbient":0,"rLightSoftness":0.8002,"rLightHardness":0,"fCamera":true,"fov":0.7863406411935253,"rExposure":0.5,"ry":0,"rCameraDistortion":0.651,"rFocalLength":0.5,"rApertureSize":0.745,"rApertureShape":0,"rApertureRotate":0},"state":{"name":"spirulae.implicit3-rt.state","iFrame":96,"width":924,"height":595,"screenCenter":{"x":0.32812050823525435,"y":0.5},"defaultScreenCenter":true,"worldSpace":true,"iTime":-1,"rz":-2.244513020910289,"rx":-1.5579644737231007,"ry":0,"fov":0.7863406411935253,"scale":0.4121479861975537,"clipSize":[2,2,2],"rTheta":3.5060174014062095,"rPhi":2.356194490192345,"renderNeeded":false,"cLatex":true,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":true,"bYup":false,"sSpp":256,"sClip":"1","cClosed":true,"sDenoise":"null","rScale1":0.60094,"rScale2":0.5,"sColor":"1","sField":"0","bGrid":false,"bDiscontinuity":true,"fAppearance":false,"rOpacity":1,"rIor":1.7009999999999998,"rRoughness1":0.418,"rRoughness2":0.3,"rEmission1":0,"rEmission2":0,"rAbsorb1":0.49995,"rAbsorb2":0,"rScatter1":0,"rScatter2":0.87318,"rVDecayAbs":0.5004000000000001,"rVDecaySca":0.15162,"rVAbsorbHue":0.55,"rVAbsorbChr":0.4,"rVAbsorbBri":0.97,"fLighting":true,"rLightIntensity":0.5,"rLightAmbient":0,"rLightSoftness":0.8002,"rLightHardness":0,"fCamera":true,"rExposure":0.5,"rCameraDistortion":0.651,"rFocalLength":0.5,"rApertureSize":0.745,"rApertureShape":0,"rApertureRotate":0,"rLightSky":0.2,"sLightPathDepth":"64","cMis":false,"sTonemap":"None","fAppearance1":null,"rMetallic1":1,"rTint1":1,"rVEmission1":0,"rScatterAniso1":0,"fAppearance2":null,"rBrightness2":0.875,"rContrast2":0.2,"rMetallic2":1,"rIor2":1,"rTint2":1,"rVEmission2":0,"rScatterAniso2":0,"rVSharpSca":0}}
    },
    {
        "name": "Genus 3",
        "id": "genus-3",
        "state": {"input":"4((x^2-1)^2+(y^2-1)^2+(z^2-1)^2+4(x^2y^2+x^2z^2+y^2z^2)+8xyz-2(x^2+y^2+z^2))","params":{"cLatex":true,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":true,"bYup":false,"sSpp":"256","sLightPathDepth":"64","cMis":false,"sClip":"1","cClosed":true,"sDenoise":"null","sTonemap":"None","rScale1":0.60094,"rScale2":0.5,"fAppearance1":false,"sColor":"2","sField":"0","bGrid":false,"bDiscontinuity":true,"rOpacity":1,"rIor":3,"rRoughness1":0.095,"rMetallic1":0,"rTint1":0,"rEmission1":0,"rAbsorb1":0.49995,"rVEmission1":0,"rScatter1":0,"rScatterAniso1":0,"fAppearance2":true,"rBrightness2":0.875,"rContrast2":0.2,"rRoughness2":0.3,"rMetallic2":1,"rIor2":0.9990000000000001,"rTint2":1,"rEmission2":0,"rAbsorb2":0,"rVDecayAbs":0.44848,"rVAbsorbHue":0.55,"rVAbsorbChr":0.4,"rVEmission2":0,"rScatter2":0,"rScatterAniso2":0,"rVDecaySca":0.6957899999999999,"rVSharpSca":0,"fLighting":true,"rTheta":0.22619467105846502,"rPhi":1.9823449644151594,"rLightIntensity":0.569,"rLightSky":0.2,"rLightAmbient":0,"rLightSoftness":0.783217,"rLightHardness":0,"fCamera":true,"fov":0.7863406411935253,"rExposure":0.5,"ry":0,"rCameraDistortion":0.5,"rFocalLength":0.5,"rApertureSize":0.2991,"rApertureShape":0,"rApertureRotate":0},"state":{"name":"spirulae.implicit3-rt.state","iFrame":225,"width":924,"height":595,"screenCenter":{"x":0.32812050823525435,"y":0.5},"defaultScreenCenter":true,"worldSpace":true,"iTime":-1,"rz":-6.354513020910291,"rx":-1.5079644737231006,"ry":0,"fov":0.7863406411935253,"scale":0.7609612788657675,"clipSize":[2,2,2],"rTheta":0.22619467105846502,"rPhi":1.9823449644151594,"renderNeeded":false,"cLatex":true,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":true,"bYup":false,"sSpp":256,"sClip":"1","cClosed":true,"sDenoise":"null","rScale1":0.60094,"rScale2":0.5,"sColor":"2","sField":"0","bGrid":false,"bDiscontinuity":true,"fAppearance":false,"rOpacity":1,"rIor":3,"rRoughness1":0.095,"rRoughness2":0.3,"rEmission1":0,"rEmission2":0,"rAbsorb1":0.49995,"rAbsorb2":0,"rScatter1":0,"rScatter2":0,"rVDecayAbs":0.44848,"rVDecaySca":0.6957899999999999,"rVAbsorbHue":0.55,"rVAbsorbChr":0.4,"rVAbsorbBri":0.97,"fLighting":true,"rLightIntensity":0.569,"rLightAmbient":0,"rLightSoftness":0.783217,"rLightHardness":0,"fCamera":true,"rExposure":0.5,"rCameraDistortion":0.5,"rFocalLength":0.5,"rApertureSize":0.2991,"rApertureShape":0,"rApertureRotate":0,"rLightSky":0.2,"sLightPathDepth":"64","cMis":false,"sTonemap":"None","fAppearance1":false,"rMetallic1":0,"rTint1":0,"rVEmission1":0,"rScatterAniso1":0,"fAppearance2":true,"rBrightness2":0.875,"rContrast2":0.2,"rMetallic2":1,"rIor2":0.9990000000000001,"rTint2":1,"rVEmission2":0,"rScatterAniso2":0,"rVSharpSca":0}}
    },
    {
        "name": "Shiny Tower",
        "id": "shiny-tower",
        "state": {"input":"4z+6=1/((sin(4x)sin(4y))^2+0.4sqrt(x^2+y^2+0.005z^2))-4sin(8z)","params":{"cLatex":true,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":true,"bYup":false,"sSpp":"256","sLightPathDepth":"64","cMis":false,"sClip":"1","cClosed":true,"sDenoise":"null","sTonemap":"None","rScale1":0.5,"rScale2":0.5,"fAppearance1":true,"sColor":"2","sField":"0","bGrid":true,"bDiscontinuity":true,"rOpacity":1,"rIor":1.7009999999999998,"rRoughness1":0,"rMetallic1":1,"rTint1":1,"rEmission1":0,"rAbsorb1":0.49995,"rVEmission1":0,"rScatter1":0,"rScatterAniso1":0,"fAppearance2":true,"rBrightness2":0.875,"rContrast2":0.2,"rRoughness2":0.262,"rMetallic2":1,"rIor2":0.9990000000000001,"rTint2":1,"rEmission2":0,"rAbsorb2":0,"rVDecayAbs":0.5004000000000001,"rVAbsorbHue":0,"rVAbsorbChr":0.4,"rVEmission2":0,"rScatter2":0,"rScatterAniso2":0,"rVDecaySca":0.01,"rVSharpSca":0,"fLighting":true,"rTheta":3.1667253948185117,"rPhi":2.767743127812608,"rLightIntensity":0.5,"rLightSky":0,"rLightAmbient":0,"rLightSoftness":0.8002,"rLightHardness":0,"fCamera":true,"fov":0.7863406411935253,"rExposure":0.5,"ry":0,"rCameraDistortion":0.5,"rFocalLength":0.5,"rApertureSize":0.01,"rApertureShape":0,"rApertureRotate":0},"state":{"name":"spirulae.implicit3-rt.state","iFrame":256,"width":924,"height":600,"screenCenter":{"x":0.32812050823525435,"y":0.5},"defaultScreenCenter":true,"worldSpace":true,"iTime":-1,"rz":-8.934513020910273,"rx":-1.4479644737231003,"ry":0,"fov":0.7863406411935253,"scale":0.3731507429717974,"clipSize":[2,2,2],"rTheta":3.1667253948185117,"rPhi":2.767743127812608,"renderNeeded":false,"cLatex":true,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":true,"bYup":false,"sSpp":256,"sClip":"1","cClosed":true,"sDenoise":"null","rScale1":0.5,"rScale2":0.5,"sColor":"2","sField":"0","bGrid":true,"bDiscontinuity":true,"fAppearance":false,"rOpacity":1,"rIor":1.7009999999999998,"rRoughness1":0,"rRoughness2":0.262,"rEmission1":0,"rEmission2":0,"rAbsorb1":0.49995,"rAbsorb2":0,"rScatter1":0,"rScatter2":0,"rVDecayAbs":0.5004000000000001,"rVDecaySca":0.01,"rVAbsorbHue":0,"rVAbsorbChr":0.4,"rVAbsorbBri":0.97,"fLighting":true,"rLightIntensity":0.5,"rLightSky":0,"rLightAmbient":0,"rLightSoftness":0.8002,"rLightHardness":0,"fCamera":true,"rExposure":0.5,"rCameraDistortion":0.5,"rFocalLength":0.5,"rApertureSize":0.01,"rApertureShape":0,"rApertureRotate":0,"sLightPathDepth":"64","cMis":false,"sTonemap":"None","fAppearance1":true,"rMetallic1":1,"rTint1":1,"rVEmission1":0,"rScatterAniso1":0,"fAppearance2":true,"rBrightness2":0.875,"rContrast2":0.2,"rMetallic2":1,"rIor2":0.9990000000000001,"rTint2":1,"rVEmission2":0,"rScatterAniso2":0,"rVSharpSca":0}}
    },
    {
        "name": "MandelTorus",
        "id": "mandeltorus",
        "state": {"input":"# parameters\nk=-1\nm=6\nn=6\nR=2\n# cartesian to toric\nr=hypot(hypot(x,y)-R,z)\na=atan(y,x)\nb=atan(hypot(x,y)-R,z)\n# toric to cartisian\nu(x,y,z)=cos(ma)(R+r^ksin(nb))\nv(x,y,z)=sin(ma)(R+r^ksin(nb))\nw(x,y,z)=r^kcos(nb)\n# iterations\nu1(x,y,z)=u(u(x,y,z)+x,v(x,y,z)+y,w(x,y,z)+z)\nv1(x,y,z)=v(u(x,y,z)+x,v(x,y,z)+y,w(x,y,z)+z)\nw1(x,y,z)=w(u(x,y,z)+x,v(x,y,z)+y,w(x,y,z)+z)\nu2(x,y,z)=u(u1(x,y,z)+x,v1(x,y,z)+y,w1(x,y,z)+z)\nv2(x,y,z)=v(u1(x,y,z)+x,v1(x,y,z)+y,w1(x,y,z)+z)\nw2(x,y,z)=w(u1(x,y,z)+x,v1(x,y,z)+y,w1(x,y,z)+z)\n# post processing\nT(x,y,z)=log(hypot(u2(x,y,z),v2(x,y,z),w2(x,y,z)))\nT(0.6x(R+1),0.6z(R+1),0.6y(R+1))=R*(e^-k+k-1)/(1+e^-k)","params":{"cLatex":false,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":true,"bYup":false,"sSpp":"256","sLightPathDepth":"64","cMis":false,"sClip":"2","cClosed":true,"sDenoise":"null","sTonemap":"None","rScale1":0.5578200000000001,"rScale2":0.99,"fAppearance1":true,"sColor":"2","sField":"0","bGrid":false,"bDiscontinuity":true,"rOpacity":0,"rIor":1.7009999999999998,"rRoughness1":0,"rMetallic1":1,"rTint1":1,"rEmission1":0,"rAbsorb1":0.77814,"rVEmission1":0,"rScatter1":0,"rScatterAniso1":0,"fAppearance2":false,"rBrightness2":0.875,"rContrast2":0.2,"rRoughness2":1,"rMetallic2":1,"rIor2":0.9990000000000001,"rTint2":1,"rEmission2":0,"rAbsorb2":0,"rVDecayAbs":0.5004000000000001,"rVAbsorbHue":0,"rVAbsorbChr":0.4,"rVEmission2":0,"rScatter2":0.99,"rScatterAniso2":0,"rVDecaySca":0.08080999999999999,"rVSharpSca":1,"fLighting":true,"rTheta":-0.4209734155810323,"rPhi":2.258805117931061,"rLightIntensity":0.523,"rLightSky":0,"rLightAmbient":0,"rLightSoftness":0.701299,"rLightHardness":0,"fCamera":true,"fov":0.7863406411935253,"rExposure":0.5,"ry":0,"rCameraDistortion":0.5,"rFocalLength":0.5,"rApertureSize":0.01,"rApertureShape":0,"rApertureRotate":0},"state":{"name":"spirulae.implicit3-rt.state","iFrame":143,"width":924,"height":595,"screenCenter":{"x":0.32812050823525435,"y":0.5},"defaultScreenCenter":true,"worldSpace":true,"iTime":-1,"rz":-9.384513020910276,"rx":-1.7979644737231006,"ry":0,"fov":0.7863406411935253,"scale":0.4755074143727509,"clipSize":[2,2,2],"rTheta":-0.4209734155810323,"rPhi":2.258805117931061,"renderNeeded":false,"cLatex":false,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":true,"bYup":false,"sSpp":256,"sClip":"2","cClosed":true,"sDenoise":"null","rScale1":0.5578200000000001,"rScale2":0.99,"sColor":"2","sField":"0","bGrid":false,"bDiscontinuity":true,"fAppearance":false,"rOpacity":0,"rIor":1.7009999999999998,"rRoughness1":0,"rRoughness2":1,"rEmission1":0,"rEmission2":0,"rAbsorb1":0.77814,"rAbsorb2":0,"rScatter1":0,"rScatter2":0.99,"rVDecayAbs":0.5004000000000001,"rVDecaySca":0.08080999999999999,"rVAbsorbHue":0,"rVAbsorbChr":0.4,"rVAbsorbBri":0.97,"fLighting":true,"rLightIntensity":0.523,"rLightSky":0,"rLightAmbient":0,"rLightSoftness":0.701299,"rLightHardness":0,"fCamera":true,"rExposure":0.5,"rCameraDistortion":0.5,"rFocalLength":0.5,"rApertureSize":0.01,"rApertureShape":0,"rApertureRotate":0,"sLightPathDepth":"64","cMis":false,"sTonemap":"None","fAppearance1":true,"rMetallic1":1,"rTint1":1,"rVEmission1":0,"rScatterAniso1":0,"fAppearance2":false,"rBrightness2":0.875,"rContrast2":0.2,"rMetallic2":1,"rIor2":0.9990000000000001,"rTint2":1,"rVEmission2":0,"rScatterAniso2":0,"rVSharpSca":1}}
    },
    {
        "name": "Coronavirus",
        "id": "coronavirus",
        "state": {"input":"0=z^6-5(x^2+y^2)z^4+5(x^2+y^2)^2z^2+2(5x^4-10x^2y^2+y^4)yz-1.002(x^2+y^2+z^2)^3+0.2","params":{"cLatex":true,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":false,"bYup":false,"sSpp":"256","sLightPathDepth":"64","cMis":false,"sClip":"1","cClosed":true,"sDenoise":"null","sTonemap":"None","rScale1":0.5,"rScale2":0.5,"fAppearance1":true,"sColor":"2","sField":"0","bGrid":false,"bDiscontinuity":true,"rOpacity":0,"rIor":1.7009999999999998,"rRoughness1":0,"rMetallic1":1,"rTint1":1,"rEmission1":0.402,"rAbsorb1":0.49995,"rVEmission1":0,"rScatter1":0,"rScatterAniso1":0,"fAppearance2":true,"rBrightness2":0.875,"rContrast2":0.2,"rRoughness2":0.3,"rMetallic2":1,"rIor2":0.9990000000000001,"rTint2":1,"rEmission2":0,"rAbsorb2":0.78012,"rVDecayAbs":0.5004000000000001,"rVAbsorbHue":0,"rVAbsorbChr":0.4,"rVEmission2":0,"rScatter2":0.13365000000000002,"rScatterAniso2":0,"rVDecaySca":0.49694,"rVSharpSca":0,"fLighting":true,"rTheta":3.5060174014062095,"rPhi":3.141592653589793,"rLightIntensity":0.5,"rLightSky":1,"rLightAmbient":0,"rLightSoftness":0.8002,"rLightHardness":0,"fCamera":true,"fov":0.7863406411935253,"rExposure":0.5,"ry":0,"rCameraDistortion":0.346,"rFocalLength":0.5,"rApertureSize":0.01,"rApertureShape":0,"rApertureRotate":0},"state":{"name":"spirulae.implicit3-rt.state","iFrame":104,"width":924,"height":595,"screenCenter":{"x":0.32812050823525435,"y":0.5},"defaultScreenCenter":true,"worldSpace":true,"iTime":-1,"rz":-2.884513020910305,"rx":-1.6479644737231007,"ry":0,"fov":0.7863406411935253,"scale":0.4560408891378082,"clipSize":[2,2,2],"rTheta":3.5060174014062095,"rPhi":3.141592653589793,"renderNeeded":false,"cLatex":true,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":false,"bYup":false,"sSpp":256,"sClip":"1","cClosed":true,"sDenoise":"null","rScale1":0.5,"rScale2":0.5,"sColor":"2","sField":"0","bGrid":false,"bDiscontinuity":true,"fAppearance":false,"rOpacity":0,"rIor":1.7009999999999998,"rRoughness1":0,"rRoughness2":0.3,"rEmission1":0.402,"rEmission2":0,"rAbsorb1":0.49995,"rAbsorb2":0.78012,"rScatter1":0,"rScatter2":0.13365000000000002,"rVDecayAbs":0.5004000000000001,"rVDecaySca":0.49694,"rVAbsorbHue":0,"rVAbsorbChr":0.4,"rVAbsorbBri":0.97,"fLighting":true,"rLightIntensity":0.5,"rLightAmbient":0,"rLightSoftness":0.8002,"rLightHardness":0,"fCamera":true,"rExposure":0.5,"rCameraDistortion":0.346,"rFocalLength":0.5,"rApertureSize":0.01,"rApertureShape":0,"rApertureRotate":0,"rLightSky":1,"sLightPathDepth":"64","cMis":false,"sTonemap":"None","fAppearance1":null,"rMetallic1":1,"rTint1":1,"rVEmission1":0,"rScatterAniso1":0,"fAppearance2":null,"rBrightness2":0.875,"rContrast2":0.2,"rMetallic2":1,"rIor2":1,"rTint2":1,"rVEmission2":0,"rScatterAniso2":0,"rVSharpSca":0}}
    },
    {
        "name": "Misty DNA",
        "id": "misty-dna",
        "state": {"input":"# polar coordinates\nr=hypot(x,y)\na=atan(y,x)+0.8z\n# strand\ns0=hypot(sin(a),sin(pi-a),r-1)-0.25\ns=s0-0.15sin(10x)sin(10y)sin(10z)\n# cross line\nc=hypot(sin(3z),rsin(a))-0.2\n# double helix\ns_max(a,b,k)=1/k*ln(e^(ka)+e^(kb))\nh(x,y,z)=s_max(-s,-s_max(c,r-1,10),10)+0.05\n# repetition\nh_r=h(mod(x-sin(0.4y),8)-4,mod(y,6)-3,z+0.1sin(x)sin(y))\n# bubbles\nb=(1.01+sin(0.9x+1.2y))(sin(2x)sin(2y)sin(2z-sin(2x)sin(y))-e^(-0.05sin(x)cos(y)))\n# put together\ng(x,y,z)=max(h_r,b)\n-0.5g(2x,2y,2z)=0","params":{"cLatex":false,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":true,"bYup":false,"sSpp":"256","sLightPathDepth":"64","cMis":false,"sClip":"1","cClosed":true,"sDenoise":"null","sTonemap":"None","rScale1":0.76852,"rScale2":0.5,"fAppearance1":true,"sColor":"2","sField":"0","bGrid":false,"bDiscontinuity":true,"rOpacity":1,"rIor":1.7009999999999998,"rRoughness1":0,"rMetallic1":1,"rTint1":1,"rEmission1":0,"rAbsorb1":0.49995,"rVEmission1":0,"rScatter1":0,"rScatterAniso1":0,"fAppearance2":true,"rBrightness2":0.875,"rContrast2":0.2,"rRoughness2":1,"rMetallic2":1,"rIor2":0.9990000000000001,"rTint2":1,"rEmission2":0,"rAbsorb2":0,"rVDecayAbs":0.5496800000000001,"rVAbsorbHue":0.55,"rVAbsorbChr":0.4,"rVEmission2":0,"rScatter2":0.79398,"rScatterAniso2":0,"rVDecaySca":0.19818000000000002,"rVSharpSca":0,"fLighting":true,"rTheta":2.657787384936965,"rPhi":2.6734953482049137,"rLightIntensity":0.42,"rLightSky":1,"rLightAmbient":0,"rLightSoftness":0.6753250000000001,"rLightHardness":0,"fCamera":true,"fov":1.79570294486539,"rExposure":0.5,"ry":0,"rCameraDistortion":0.5,"rFocalLength":0.5,"rApertureSize":0.72834,"rApertureShape":0,"rApertureRotate":0},"state":{"name":"spirulae.implicit3-rt.state","iFrame":75,"width":924,"height":595,"screenCenter":{"x":0.32812050823525435,"y":0.5},"defaultScreenCenter":true,"worldSpace":true,"iTime":-1,"rz":-7.534513020910266,"rx":-2.8779644737230865,"ry":0,"fov":1.79570294486539,"scale":0.7806933808865013,"clipSize":[2,2,2],"rTheta":2.657787384936965,"rPhi":2.6734953482049137,"renderNeeded":false,"cLatex":false,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":true,"bYup":false,"sSpp":256,"sClip":"1","cClosed":true,"sDenoise":"null","rScale1":0.76852,"rScale2":0.5,"sColor":"2","sField":"0","bGrid":false,"bDiscontinuity":true,"fAppearance":false,"rOpacity":1,"rIor":1.7009999999999998,"rRoughness1":0,"rRoughness2":1,"rEmission1":0,"rEmission2":0,"rAbsorb1":0.49995,"rAbsorb2":0,"rScatter1":0,"rScatter2":0.79398,"rVDecayAbs":0.5496800000000001,"rVDecaySca":0.19818000000000002,"rVAbsorbHue":0.55,"rVAbsorbChr":0.4,"rVAbsorbBri":0.97,"fLighting":true,"rLightIntensity":0.42,"rLightSky":1,"rLightAmbient":0,"rLightSoftness":0.6753250000000001,"rLightHardness":0,"fCamera":true,"rExposure":0.5,"rCameraDistortion":0.5,"rFocalLength":0.5,"rApertureSize":0.72834,"rApertureShape":0,"rApertureRotate":0,"sLightPathDepth":"64","cMis":false,"sTonemap":"None","fAppearance1":null,"rMetallic1":1,"rTint1":1,"rVEmission1":0,"rScatterAniso1":0,"fAppearance2":null,"rBrightness2":0.875,"rContrast2":0.2,"rMetallic2":1,"rIor2":1,"rTint2":1,"rVEmission2":0,"rScatterAniso2":0,"rVSharpSca":0}}
    },
    {
        "name": "Ghost Swamp",
        "id": "ghost-swamp",
        "state": {"input":"s_max(x,y,k)=1/kln(e^(kx)+e^(ky))\nx1=hypot(x,0.05)\nf=hypot(x,2y,1.1z-0.5cos(z)-0.1)-2\ne1=hypot(x1-0.8,z-0.5)-0.4\nn(x,y)=sqrt(x^2+xy+y^2)-0.15\ns=s_max(f,s_max(-e1,-n(x1-0.1,z+0.3),10),5)\ns-0.2(0.5-0.5tanh(5(z+1.)))cos(10x)\n","params":{"cLatex":false,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":false,"bYup":false,"sSpp":"256","sLightPathDepth":"64","cMis":false,"sClip":"1","cClosed":true,"sDenoise":"null","sTonemap":"None","rScale1":0.5,"rScale2":0.5,"fAppearance1":true,"sColor":"1","sField":"0","bGrid":false,"bDiscontinuity":true,"rOpacity":1,"rIor":1.7009999999999998,"rRoughness1":0.274,"rMetallic1":1,"rTint1":1,"rEmission1":0,"rAbsorb1":0.39798,"rVEmission1":0,"rScatter1":0,"rScatterAniso1":0,"fAppearance2":false,"rBrightness2":0.875,"rContrast2":0.2,"rRoughness2":0.3,"rMetallic2":1,"rIor2":0.9990000000000001,"rTint2":1,"rEmission2":0,"rAbsorb2":0.67815,"rVDecayAbs":0.5496800000000001,"rVAbsorbHue":0.142,"rVAbsorbChr":0.4,"rVEmission2":0,"rScatter2":0.94644,"rScatterAniso2":0,"rVDecaySca":0.18072,"rVSharpSca":0.557,"fLighting":true,"rTheta":3.0410616886749198,"rPhi":2.811725424962865,"rLightIntensity":0.5,"rLightSky":0,"rLightAmbient":0,"rLightSoftness":0.754246,"rLightHardness":0,"fCamera":true,"fov":0.7863406411935253,"rExposure":0.5,"ry":0,"rCameraDistortion":0.5,"rFocalLength":0.5,"rApertureSize":0.28538,"rApertureShape":0,"rApertureRotate":0},"state":{"name":"spirulae.implicit3-rt.state","iFrame":256,"width":924,"height":600,"screenCenter":{"x":0.32812050823525435,"y":0.5},"defaultScreenCenter":true,"worldSpace":true,"iTime":-1,"rz":-9.1845130209103,"rx":-1.6079644737231007,"ry":0,"fov":0.7863406411935253,"scale":0.41529224393772285,"clipSize":[2,2,2],"rTheta":3.0410616886749198,"rPhi":2.811725424962865,"renderNeeded":false,"cLatex":false,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":false,"bYup":false,"sSpp":"256","sClip":"1","cClosed":true,"sDenoise":"null","rScale1":0.5,"rScale2":0.5,"sColor":"1","sField":"0","bGrid":false,"bDiscontinuity":true,"fAppearance":false,"rOpacity":1,"rIor":1.7009999999999998,"rRoughness1":0.274,"rRoughness2":0.3,"rEmission1":0,"rEmission2":0,"rAbsorb1":0.39798,"rAbsorb2":0.67815,"rScatter1":0,"rScatter2":0.94644,"rVDecayAbs":0.5496800000000001,"rVDecaySca":0.18072,"rVAbsorbHue":0.142,"rVAbsorbChr":0.4,"rVAbsorbBri":0.97,"fLighting":true,"rLightIntensity":0.5,"rLightSky":0,"rLightAmbient":0,"rLightSoftness":0.754246,"rLightHardness":0,"fCamera":true,"rExposure":0.5,"rCameraDistortion":0.5,"rFocalLength":0.5,"rApertureSize":0.28538,"rApertureShape":0,"rApertureRotate":0,"sLightPathDepth":"64","cMis":false,"sTonemap":"None","fAppearance1":true,"rMetallic1":1,"rTint1":1,"rVEmission1":0,"rScatterAniso1":0,"fAppearance2":false,"rBrightness2":0.875,"rContrast2":0.2,"rMetallic2":1,"rIor2":0.9990000000000001,"rTint2":1,"rVEmission2":0,"rScatterAniso2":0,"rVSharpSca":0.557}}
    },
    {
        "name": "Hyperfocus",
        "id": "hyperfocus",
        "state": {"input":"x^2+y^2z+z^2=0.01","params":{"cLatex":true,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":false,"bYup":false,"sSpp":"256","sLightPathDepth":"64","cMis":false,"sClip":"1","cClosed":true,"sDenoise":"null","sTonemap":"None","rScale1":0.5,"rScale2":0.5,"fAppearance1":true,"sColor":"2","sField":"0","bGrid":false,"bDiscontinuity":true,"rOpacity":0,"rIor":1.323,"rRoughness1":0,"rMetallic1":1,"rTint1":1,"rEmission1":0,"rAbsorb1":0.50193,"rVEmission1":0,"rScatter1":0,"rScatterAniso1":0,"fAppearance2":true,"rBrightness2":0.875,"rContrast2":0.2,"rRoughness2":0.727,"rMetallic2":1,"rIor2":0.9990000000000001,"rTint2":1,"rEmission2":0,"rAbsorb2":0.07227,"rVDecayAbs":0.3156,"rVAbsorbHue":0.55,"rVAbsorbChr":0.4,"rVEmission2":0,"rScatter2":0,"rScatterAniso2":0,"rVDecaySca":0.49985,"rVSharpSca":0,"fLighting":false,"rTheta":3.141592653589793,"rPhi":2.356194490192345,"rLightIntensity":0.5,"rLightSky":0,"rLightAmbient":0,"rLightSoftness":0.652348,"rLightHardness":1,"fCamera":true,"fov":0.7863406411935253,"rExposure":0.5,"ry":0.3267256359733386,"rCameraDistortion":0.624,"rFocalLength":0.5,"rApertureSize":0.7312799999999999,"rApertureShape":0,"rApertureRotate":0},"state":{"name":"spirulae.implicit3-rt.state","iFrame":256,"width":924,"height":595,"screenCenter":{"x":0.32812050823525435,"y":0.5},"defaultScreenCenter":true,"worldSpace":true,"iTime":-1,"rz":-0.804513020910302,"rx":-1.7079644737231008,"ry":0.3267256359733386,"fov":0.7863406411935253,"scale":0.4295690404714981,"clipSize":[2,2,2],"rTheta":3.141592653589793,"rPhi":2.356194490192345,"renderNeeded":false,"cLatex":true,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":false,"bYup":false,"sSpp":256,"sClip":"1","cClosed":true,"sDenoise":"null","rScale1":0.5,"rScale2":0.5,"sColor":"2","sField":"0","bGrid":false,"bDiscontinuity":true,"fAppearance":false,"rOpacity":0,"rIor":1.323,"rRoughness1":0,"rRoughness2":0.727,"rEmission1":0,"rEmission2":0,"rAbsorb1":0.50193,"rAbsorb2":0.07227,"rScatter1":0,"rScatter2":0,"rVDecayAbs":0.3156,"rVDecaySca":0.49985,"rVAbsorbHue":0.55,"rVAbsorbChr":0.4,"rVAbsorbBri":0.97,"fLighting":false,"rLightIntensity":0.5,"rLightAmbient":0,"rLightSoftness":0.652348,"rLightHardness":1,"fCamera":true,"rExposure":0.5,"rCameraDistortion":0.624,"rFocalLength":0.5,"rApertureSize":0.7312799999999999,"rApertureShape":0,"rApertureRotate":0,"rLightSky":0,"sLightPathDepth":"64","cMis":false,"sTonemap":"None","fAppearance1":null,"rMetallic1":1,"rTint1":1,"rVEmission1":0,"rScatterAniso1":0,"fAppearance2":null,"rBrightness2":0.875,"rContrast2":0.2,"rMetallic2":1,"rIor2":1,"rTint2":1,"rVEmission2":0,"rScatterAniso2":0,"rVSharpSca":0}}
    },
    {
        "name": "Foggy Dusk",
        "id": "foggy-dusk",
        "state": {"input":"w(x,y)=sqrt(x^2-|x|y+y^2)\nf0(x,y,z)=min(w(x,y),w(x,z),w(y,z))-1\nr(x)=6/piasin(sin(pi/6x)\nf(n)=f0(r(nx),r(ny),r(nz))\nb=sin(5x)+sin(5y)+sin(5z)\nh=min(f(3),f(9),f(27),f(81),f(243))\nmax(5b,-h)\nc_hsv=vec3(atan2(z,y),0.7,0.8)","params":{"cLatex":false,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":true,"bYup":false,"sSpp":"256","sLightPathDepth":"16","cMis":false,"sClip":"1","cClosed":true,"sDenoise":"null","sTonemap":"None","rScale1":0.60094,"rScale2":0.5,"fAppearance1":true,"sColor":"1","sField":"0","bGrid":false,"bDiscontinuity":true,"rOpacity":1,"rIor":1.7009999999999998,"rRoughness1":0.429,"rMetallic1":1,"rTint1":1,"rEmission1":0,"rAbsorb1":0.49995,"rVEmission1":0,"rScatter1":0,"rScatterAniso1":0,"fAppearance2":false,"rBrightness2":0.875,"rContrast2":0.2,"rRoughness2":0.3,"rMetallic2":1,"rIor2":0.9990000000000001,"rTint2":1,"rEmission2":0,"rAbsorb2":0,"rVDecayAbs":0.5004000000000001,"rVAbsorbHue":0.55,"rVAbsorbChr":0.4,"rVEmission2":0,"rScatter2":0.60687,"rScatterAniso2":0,"rVDecaySca":0.4368,"rVSharpSca":0,"fLighting":false,"rTheta":3.5060174014062095,"rPhi":1.5268140296446395,"rLightIntensity":1,"rLightSky":0.82,"rLightAmbient":0,"rLightSoftness":0.757243,"rLightHardness":0,"fCamera":true,"fov":0.7863406411935253,"rExposure":0.5,"ry":0,"rCameraDistortion":0.651,"rFocalLength":0.5,"rApertureSize":0.01,"rApertureShape":0,"rApertureRotate":0},"state":{"name":"spirulae.implicit3-rt.state","iFrame":68,"width":924,"height":600,"screenCenter":{"x":0.5,"y":0.5},"defaultScreenCenter":true,"worldSpace":true,"iTime":-1,"rz":3.7754869790896994,"rx":-1.6879644737230994,"ry":0,"fov":0.7863406411935253,"scale":0.42165290460318333,"clipSize":[2,2,2],"rTheta":3.5060174014062095,"rPhi":1.5268140296446395,"renderNeeded":false,"cLatex":false,"cAutoUpdate":true,"fBasic":false,"sStep":"0.01","bLight":true,"bYup":false,"sSpp":"256","sClip":"1","cClosed":true,"sDenoise":"null","rScale1":0.60094,"rScale2":0.5,"sColor":"1","sField":"0","bGrid":false,"bDiscontinuity":true,"fAppearance":false,"rOpacity":1,"rIor":1.7009999999999998,"rRoughness1":0.429,"rRoughness2":0.3,"rEmission1":0,"rEmission2":0,"rAbsorb1":0.49995,"rAbsorb2":0,"rScatter1":0,"rScatter2":0.60687,"rVDecayAbs":0.5004000000000001,"rVDecaySca":0.4368,"rVAbsorbHue":0.55,"rVAbsorbChr":0.4,"rVAbsorbBri":0.97,"fLighting":false,"rLightIntensity":1,"rLightAmbient":0,"rLightSoftness":0.757243,"rLightHardness":0,"fCamera":true,"rExposure":0.5,"rCameraDistortion":0.651,"rFocalLength":0.5,"rApertureSize":0.01,"rApertureShape":0,"rApertureRotate":0,"rLightSky":0.82,"sTonemap":"None","sLightPathDepth":"16","cMis":false,"fAppearance1":true,"rMetallic1":1,"rTint1":1,"rVEmission1":0,"rScatterAniso1":0,"fAppearance2":false,"rBrightness2":0.875,"rContrast2":0.2,"rMetallic2":1,"rIor2":0.9990000000000001,"rTint2":1,"rVEmission2":0,"rScatterAniso2":0,"rVSharpSca":0}}
    },
];


document.body.onload = function (event) {
    console.log("onload");

    // init built-in functions
    // initBuiltInFunctions(builtinFunctions);

    for (var i = 0; i < builtinStates.length; i++) {
        var state = builtinStates[i].state.state;
        var params = builtinStates[i].state.params;
        params.fAppearance1 = params.fAppearance2 = params.fCamera = params.fLighting = true;
        params.sDenoise = "null";
        // params.sDenoise = "runet2gan";
        params.sSpp = state.sSpp = 256;
        state.iSpp = 0.0;
        params.sSamples = state.sSamples = "0.0625";
        // state.defaultScreenCenter = true;
    }
    initBuiltInStates(builtinStates);

    // init parser
    BuiltInMathFunctions.initMathFunctions(
        BuiltInMathFunctions.rawMathFunctionsShared
            .concat(BuiltInMathFunctions.rawMathFunctionsR)
    );
    MathParser.DependentVariables = {
        0: {
            'val': true,
        },
        1: {
            'val': true,
            'c_rgb': true,
        },
        2: {
            'val': true,
            'c_hsv': true,
        },
        3: {
            'val': true,
            'c_hsl': true,
        },
        'c_rgb': { type: 'vec3' },
        'c_hsv': { type: 'vec3' },
        'c_hsl': { type: 'vec3' },
    };

    CodeGenerator.langs.glsl.config = {
        fun: [
            "float {%funname%}(float x, float y, float z) {\n\
    float {%funbody%};\n\
    return {%val%};\n\
}",
            "#define CUSTOM_COLOR rgb2rgb\n\
float {%funname%}(float x, float y, float z) {\n\
    float {%funbody%};\n\
    return {%val%};\n\
}\n\
vec3 {%funname%}Color(float x, float y, float z) {\n\
    float {%funbody%};\n\
    return vec3({%c_rgb[0]%},{%c_rgb[1]%},{%c_rgb[2]%});\n\
}",
            "#define CUSTOM_COLOR hsv2rgb\n\
float {%funname%}(float x, float y, float z) {\n\
    float {%funbody%};\n\
    return {%val%};\n\
}\n\
vec3 {%funname%}Color(float x, float y, float z) {\n\
    float {%funbody%};\n\
    return vec3({%c_hsv[0]%},{%c_hsv[1]%},{%c_hsv[2]%});\n\
}",
            "#define CUSTOM_COLOR hsl2rgb\n\
float {%funname%}(float x, float y, float z) {\n\
    float {%funbody%};\n\
    return {%val%};\n\
}\n\
vec3 {%funname%}Color(float x, float y, float z) {\n\
    float {%funbody%};\n\
    return vec3({%c_hsl[0]%},{%c_hsl[1]%},{%c_hsl[2]%});\n\
}",
        ],
        prefix: 'v',
        def: "{%varname%}={%expr%}",
        joiner: ", "
    };

    // init parameters
    initParameters([
        new GraphingParameter("cLatex", "checkbox-latex"),
        new GraphingParameter("cAutoUpdate", "checkbox-auto-compile"),
        // basic
        new ParameterFolder("fBasic", "folder-basic"),
        new GraphingParameter("sStep", "select-step"),
        new GraphingParameter("bLight", "checkbox-light"),
        new GraphingParameter("bYup", "checkbox-yup"),
        new GraphingParameter("sSpp", "select-spp"),
        new GraphingParameter("sSamples", "select-samples"),
        new GraphingParameter("sLightPathDepth", "select-light-path-depth"),
        new GraphingParameter("cMis", "checkbox-mis"),
        new GraphingParameter("sClip", "select-clip"),
        new GraphingParameter("cClosed", "checkbox-closed"),
        new GraphingParameter("sDenoise", "select-denoise"),
        new GraphingParameter("sTonemap", "select-tonemap"),
        new UniformSlider("rScale1", "slider-scale1", 0.01, 0.99, 0.5),
        new UniformSlider("rScale2", "slider-scale2", 0.01, 0.99, 0.5),
        // object appearance
        new ParameterFolder("fAppearance1", "folder-object"),
        new GraphingParameter("sColor", "select-color"),
        new GraphingParameter("sField", "select-field"),
        new GraphingParameter("bGrid", "checkbox-grid"),
        new GraphingParameter("bDiscontinuity", "checkbox-discontinuity"),
        new UniformSlider("rOpacity", "slider-opacity", 0, 1, 0.0),
        new UniformSlider("rIor", "slider-ior", 0, 3, 1.7),
        new UniformSlider("rRoughness1", "slider-roughness1", 0, 1, 0.2),
        new UniformSlider("rMetallic1", "slider-metallic1", 0, 1, 1.0),
        // new UniformSlider("rDiffuse1", "slider-diffuse1", 0, 1, 0.0),
        new UniformSlider("rTint1", "slider-tint1", 0, 1, 1.0),
        new UniformSlider("rEmission1", "slider-emission1", 0, 1, 0.0),
        new UniformSlider("rAbsorb1", "slider-absorb1", 0, 0.99, 0.5),
        new UniformSlider("rVEmission1", "slider-vemission1", 0, 1, 0.0),
        new UniformSlider("rScatter1", "slider-scatter1", 0, 0.99, 0.0),
        new UniformSlider("rScatterAniso1", "slider-scatter-aniso1", -0.99, 0.99, 0.0),
        // background appearance
        new ParameterFolder("fAppearance2", "folder-background"),
        new UniformSlider("rBrightness2", "slider-brightness2", 0, 1, 0.875),
        new UniformSlider("rContrast2", "slider-contrast2", 0, 1, 0.2),
        new UniformSlider("rRoughness2", "slider-roughness2", 0, 1, 0.3),
        new UniformSlider("rMetallic2", "slider-metallic2", 0, 1, 1.0),
        new UniformSlider("rIor2", "slider-ior2", 0, 3, 1.0),
        new UniformSlider("rTint2", "slider-tint2", 0, 1, 1.0),
        new UniformSlider("rEmission2", "slider-emission2", 0, 1, 0.0),
        new UniformSlider("rAbsorb2", "slider-absorb2", 0, 0.99, 0.0),
        new UniformSlider("rVDecayAbs", "slider-vdecay-abs", 0.1, 0.98, 0.5),
        new UniformSlider("rVAbsorbHue", "slider-vabsorb-hue", 0, 1, 0.55),
        new UniformSlider("rVAbsorbChr", "slider-vabsorb-chr", 0, 1, 0.4),
        new UniformSlider("rVEmission2", "slider-vemit", 0, 1, 0),
        // new UniformSlider("rVEmissionTint2", "slider-vemit-tint", 0, 1, 0.0),
        new UniformSlider("rScatter2", "slider-scatter2", 0, 0.99, 0.0),
        new UniformSlider("rScatterAniso2", "slider-scatter-aniso2", -0.99, 0.99, 0.0),
        new UniformSlider("rVDecaySca", "slider-vdecay-sca", 0.01, 0.98, 0.5),
        new UniformSlider("rVSharpSca", "slider-vsharp-sca", 0, 1, 0),
        // lighting
        new ParameterFolder("fLighting", "folder-lighting"),
        new UniformSlider("rTheta", "slider-theta", -0.5 * Math.PI, 1.5 * Math.PI, 1.0 * Math.PI),
        new UniformSlider("rPhi", "slider-phi", 0, Math.PI, 0.75 * Math.PI),
        new UniformSlider("rLightIntensity", "slider-light-intensity", 0, 1, 0.5),
        new UniformSlider("rLightSky", "slider-light-sky", 0, 1, 0.2),
        new UniformSlider("rLightAmbient", "slider-light-ambient", 0, 1, 0.0),
        new UniformSlider("rLightSoftness", "slider-light-softness", 0.001, 1, 0.8),
        new UniformSlider("rLightHardness", "slider-light-hardness", 0, 1, 0.0),
        // camera
        new ParameterFolder("fCamera", "folder-camera"),
        new UniformSlider("fov", "slider-camera-fov", 0.01*Math.PI, 0.9*Math.PI, 0.25*Math.PI),
        new UniformSlider("rExposure", "slider-camera-exposure", 0.01, 0.99, 0.5),
        new UniformSlider("ry", "slider-camera-roll", -Math.PI, Math.PI, 0.0),
        new UniformSlider("rCameraDistortion", "slider-camera-distortion", 0.0, 1.0, 0.5),
        new UniformSlider("rFocalLength", "slider-focal-length", 0.01, 0.99, 0.5),
        new UniformSlider("rApertureSize", "slider-aperture-size", 0.01, 0.99, 0.01),
        new UniformSlider("rApertureShape", "slider-aperture-shape", 0.0, 1.0, 0.0),
        new UniformSlider("rApertureRotate", "slider-aperture-rotate", -Math.PI, Math.PI, 0.0),
    ]);
    UpdateFunctionInputConfig.complexMode = false;
    UpdateFunctionInputConfig.implicitMode = true;
    UpdateFunctionInputConfig.warnNaN = true;

    // denoise
    let selectDenoise = document.getElementById("select-denoise");
    useDenoiser(selectDenoise.value);
    selectDenoise.addEventListener("input",
        () => useDenoiser(selectDenoise.value));

    // init viewport
    // resetState({
    //     rz: -0.95 * Math.PI,
    //     rx: -0.48 * Math.PI,
    //     scale: 0.3,
    //     clipSize: [2.0, 2.0, 2.0]
    // }, false);

    // main
    initMain([
        "frag-render.glsl",
        "sky_model.glsl",
        "../shaders/frag-copy.glsl",
        "../shaders/frag-rt-post.glsl",
        "../shaders/frag-tonemap.glsl",
        "../shaders/dnn-conv2d311.glsl",
        "../shaders/dnn-conv2d110.glsl",
        "../shaders/dnn-convtranspose2d421.glsl",
        "../shaders/complex-zeta.glsl",
        "../shaders/complex.glsl",
    ]);
};



// for local testing

function exportAllFunctions(lang, grad = false) {
    let langpack = CodeGenerator.langs[lang];
    let oldConfig = langpack.config;
    langpack.config = langpack.presets[grad ? 'implicit3g_compact' : 'implicit3_compact'];
    var funs = builtinFunctions;
    var names = [], exprs = [];
    for (var i = 0; i < funs.length; i++) {
        var name = 'fun' + funs[i][0].replace(/[^\w]/g, '');
        console.log(name);
        var str = funs[i][1].replaceAll("&#32;", ' ')
        var expr = MathParser.parseInput(str);
        names.push(name);
        exprs.push({ val: expr.val[0] });
    }
    var res = CodeGenerator.postfixToSource(exprs, names, lang);
    console.log(res.source);
    langpack.config = oldConfig;
}

function exportCurrentFunction(lang, grad = false) {
    let langpack = CodeGenerator.langs[lang];
    let oldConfig = langpack.config;
    langpack.config = langpack.presets[grad ? 'implicit3g' : 'implicit3'];
    var str = document.getElementById("equation-input").value;
    var expr = MathParser.parseInput(str).val[0];
    var res = CodeGenerator.postfixToSource(
        [{ val: expr }], ["fun"], lang);
    console.log(res.source);
    langpack.config = oldConfig;
}
